2025-05-02 06:17:58.015 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 06:17:58.136 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 06:17:58.143 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 06:17:58.145 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 06:17:58.216 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 06:17:58.219 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 06:17:59.402 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 06:17:59.477 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 06:17:59.489 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 06:17:59.495 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 06:17:59.557 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 06:17:59.597 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 06:17:59.600 +03:00 [INF] تم تطبيق تحديثات قاعدة البيانات
2025-05-02 06:17:59.836 +03:00 [INF] بدء تشغيل التطبيق
2025-05-02 06:17:59.862 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 06:18:00.038 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 06:18:00.040 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 06:18:00.045 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 06:18:00.046 +03:00 [INF] Hosting environment: Development
2025-05-02 06:18:00.047 +03:00 [INF] Content root path: C:\Users\ta\Downloads\gpfirst
2025-05-02 06:18:13.623 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 06:18:13.806 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 188.5168ms
2025-05-02 06:18:13.886 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 06:18:14.005 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 118.9779ms
2025-05-02 06:18:14.074 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 06:18:14.527 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 06:18:14.920 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 392.4087ms
2025-05-02 06:18:55.275 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/register - application/json 102
2025-05-02 06:18:55.284 +03:00 [INF] CORS policy execution failed.
2025-05-02 06:18:55.286 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 06:18:55.294 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 06:18:55.347 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(e_learning.DTOs.UserRegisterDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 06:18:55.536 +03:00 [WRN] كلمة مرور ضعيفة: الطول أقل من 8
2025-05-02 06:18:55.542 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 06:18:55.577 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Register (e_learning) in 214.1895ms
2025-05-02 06:18:55.583 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 06:18:55.596 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/register - 400 null application/json; charset=utf-8 320.5658ms
2025-05-02 06:19:08.565 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/register - application/json 104
2025-05-02 06:19:08.572 +03:00 [INF] CORS policy execution failed.
2025-05-02 06:19:08.573 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 06:19:08.580 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 06:19:08.583 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(e_learning.DTOs.UserRegisterDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 06:19:08.972 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[@__dto_Email_0='user@example.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__dto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 06:19:09.006 +03:00 [INF] Executing ConflictObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 06:19:09.010 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Register (e_learning) in 410.1105ms
2025-05-02 06:19:09.025 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 06:19:09.041 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/register - 409 null application/json; charset=utf-8 475.7163ms
2025-05-02 06:19:16.555 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/register - application/json 104
2025-05-02 06:19:16.558 +03:00 [INF] CORS policy execution failed.
2025-05-02 06:19:16.559 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 06:19:16.562 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 06:19:16.564 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(e_learning.DTOs.UserRegisterDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 06:19:16.695 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='dddd@example.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__dto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 06:19:17.469 +03:00 [ERR] Failed executing DbCommand (25ms) [Parameters=[@p0='2025-05-02T03:19:17.0310683Z', @p1='dddd@example.com' (Size = 4000), @p2='string' (Size = 4000), @p3='False', @p4='$2a$11$ugQsv0Tr2b.NTwOufFlnmeOW7jiFQdB95FZJQMHYua1BN66n2veXO' (Size = 4000), @p5='Student' (Nullable = false) (Size = 4000), @p6=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-02 06:19:17.531 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'e_learning.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'CreatedAt'.
Invalid column name 'UpdatedAt'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9e3ff85e-25aa-434f-afb6-6af14e51ab5c
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'CreatedAt'.
Invalid column name 'UpdatedAt'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9e3ff85e-25aa-434f-afb6-6af14e51ab5c
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-02 06:19:17.582 +03:00 [ERR] خطأ في التسجيل
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid column name 'CreatedAt'.
Invalid column name 'UpdatedAt'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:9e3ff85e-25aa-434f-afb6-6af14e51ab5c
Error Number:207,State:1,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.AuthController.Register(UserRegisterDto dto) in C:\Users\ta\Downloads\gpfirst\Controllers\AuthController .cs:line 73
2025-05-02 06:19:17.686 +03:00 [INF] Executing ObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 06:19:17.691 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Register (e_learning) in 1114.8859ms
2025-05-02 06:19:17.694 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 06:19:17.706 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/register - 500 null application/json; charset=utf-8 1151.4511ms
2025-05-02 06:19:26.978 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 06:19:27.174 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 195.5268ms
2025-05-02 06:19:28.502 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/favicon.ico - null null
2025-05-02 06:19:28.508 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/favicon.ico - 404 0 null 5.4907ms
2025-05-02 06:19:28.602 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/favicon.ico, Response status code: 404
2025-05-02 06:23:29.070 +03:00 [INF] Application is shutting down...
2025-05-02 06:27:42.570 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 06:27:42.722 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 06:27:42.729 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 06:27:42.738 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 06:27:42.829 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 06:27:42.832 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 06:27:44.023 +03:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 06:27:44.106 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 06:27:44.114 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 06:27:44.121 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 06:27:44.192 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 06:27:44.252 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 06:27:44.254 +03:00 [INF] تم تطبيق تحديثات قاعدة البيانات
2025-05-02 06:27:44.582 +03:00 [INF] بدء تشغيل التطبيق
2025-05-02 06:27:44.610 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 06:27:44.940 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 06:27:44.945 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 06:27:44.963 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 06:27:44.970 +03:00 [INF] Hosting environment: Development
2025-05-02 06:27:44.975 +03:00 [INF] Content root path: C:\Users\ta\Downloads\gpfirst
2025-05-02 06:27:57.588 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 06:27:57.809 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 226.181ms
2025-05-02 06:27:57.846 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 06:27:57.938 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 91.6669ms
2025-05-02 06:27:57.949 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 06:27:58.315 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 06:27:58.726 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 410.9026ms
2025-05-02 06:28:33.525 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 06:28:33.544 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 19.0636ms
2025-05-02 06:28:33.581 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 06:28:33.592 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 10.5527ms
2025-05-02 06:28:33.606 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 06:28:33.827 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 06:28:33.893 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 65.7585ms
2025-05-02 06:29:31.140 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 06:29:31.147 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 5.886ms
2025-05-02 06:29:31.179 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 06:29:31.187 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 7.6242ms
2025-05-02 06:29:31.196 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 06:29:31.321 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 06:29:31.388 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 67.1954ms
2025-05-02 06:31:46.724 +03:00 [INF] Application is shutting down...
2025-05-02 06:35:02.397 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 06:35:02.500 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 06:35:02.506 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 06:35:02.507 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 06:35:02.599 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 06:35:02.601 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 06:35:03.574 +03:00 [INF] Executed DbCommand (124ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 06:35:04.107 +03:00 [INF] Executed DbCommand (240ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 06:35:04.321 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 06:35:04.331 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 06:35:05.276 +03:00 [INF] Executed DbCommand (836ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 06:35:05.632 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 06:35:05.639 +03:00 [INF] تم تطبيق تحديثات قاعدة البيانات
2025-05-02 06:35:06.004 +03:00 [INF] بدء تشغيل التطبيق
2025-05-02 06:35:06.055 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 06:35:06.393 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 06:35:06.416 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 06:35:06.430 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 06:35:06.457 +03:00 [INF] Hosting environment: Development
2025-05-02 06:35:06.459 +03:00 [INF] Content root path: C:\Users\ta\Downloads\gpfirst
2025-05-02 06:35:08.366 +03:00 [INF] Application is shutting down...
2025-05-02 16:36:54.728 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 16:36:54.843 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:36:54.855 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:36:54.858 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:36:54.919 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:36:54.925 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:36:55.222 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:36:55.225 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:36:55.230 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:36:55.242 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:36:55.246 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:37:31.766 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 16:37:32.071 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:37:32.084 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:37:32.093 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:37:32.156 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:37:32.325 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:37:33.578 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:37:33.634 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 16:37:33.645 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:37:33.652 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 16:37:33.859 +03:00 [INF] Executed DbCommand (155ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 16:37:33.899 +03:00 [INF] Applying migration '20250502133656_UpadateNotifications'.
2025-05-02 16:39:44.316 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 16:39:44.397 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:39:44.405 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:39:44.409 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:39:44.447 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:39:44.450 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:39:45.029 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:39:45.166 +03:00 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [E_LearningDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-05-02 16:39:45.271 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [E_LearningDB];
2025-05-02 16:40:25.150 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 16:40:25.309 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:40:25.321 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:40:25.330 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:40:25.422 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:40:26.233 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:40:27.075 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:40:27.118 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:40:27.120 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:40:27.146 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:40:27.152 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:40:53.521 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 16:40:53.877 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:40:53.934 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:40:54.197 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:40:54.292 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:40:54.298 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:40:55.324 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:40:55.327 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:40:55.330 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:40:55.362 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:40:55.496 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:40:56.217 +03:00 [INF] Executed DbCommand (621ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [E_LearningDB];
2025-05-02 16:40:56.341 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [E_LearningDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-05-02 16:40:56.481 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:40:56.595 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-05-02 16:40:56.603 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:40:56.628 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 16:40:56.654 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 16:40:56.686 +03:00 [INF] Applying migration '20250502134028_UpadateNotifications'.
2025-05-02 16:40:56.851 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Categories] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([Id])
);
2025-05-02 16:40:56.866 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [EmailConfirmationCodes] (
    [Id] int NOT NULL IDENTITY,
    [Email] nvarchar(450) NOT NULL,
    [Code] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETDATE()),
    CONSTRAINT [PK_EmailConfirmationCodes] PRIMARY KEY ([Id])
);
2025-05-02 16:40:56.875 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [Email] nvarchar(450) NOT NULL,
    [Code] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETDATE()),
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id])
);
2025-05-02 16:40:56.886 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [PasswordHash] nvarchar(max) NULL,
    [Role] nvarchar(max) NOT NULL,
    [IsEmailConfirmed] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-05-02 16:40:56.899 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Title] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Price] decimal(18,2) NOT NULL,
    [ImageUrl] nvarchar(max) NULL,
    [IsActive] bit NULL,
    [CategoryId] int NOT NULL,
    [InstructorId] int NOT NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Courses_Users_InstructorId] FOREIGN KEY ([InstructorId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 16:40:56.913 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(100) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [UserId] int NOT NULL,
    [SenderId] nvarchar(max) NULL,
    [IsRead] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    [NotificationType] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Notifications_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 16:40:56.929 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Profiles] (
    [Id] int NOT NULL IDENTITY,
    [Bio] nvarchar(max) NULL,
    [ProfilePicture] nvarchar(max) NULL,
    [Address] nvarchar(max) NULL,
    [Phone] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NOT NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_Profiles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Profiles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 16:40:56.950 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRefreshTokens] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [RefreshToken] nvarchar(450) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETDATE()),
    CONSTRAINT [PK_UserRefreshTokens] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRefreshTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 16:40:56.959 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Enrollments] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_Enrollments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Enrollments_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Enrollments_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 16:40:56.971 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Lessons] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NULL,
    [VideoUrl] nvarchar(max) NULL,
    [AttachmentUrl] nvarchar(max) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_Lessons] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Lessons_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE
);
2025-05-02 16:40:57.003 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [CourseId] int NOT NULL,
    [Text] nvarchar(max) NULL,
    [AttachmentUrl] nvarchar(max) NULL,
    [SentAt] datetime2 NOT NULL,
    [ReplyToMessageId] int NULL,
    [IsSeen] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Messages_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Messages_ReplyToMessageId] FOREIGN KEY ([ReplyToMessageId]) REFERENCES [Messages] ([Id]),
    CONSTRAINT [FK_Messages_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 16:40:57.028 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [CourseId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [PaymentMethod] nvarchar(max) NULL,
    [IsSuccessful] bit NOT NULL,
    [PaidAt] datetime2 NOT NULL,
    [TransactionId] nvarchar(max) NULL,
    [CourseId1] int NULL,
    [UserId1] int NULL,
    CONSTRAINT [PK_Payments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Payments_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Payments_Courses_CourseId1] FOREIGN KEY ([CourseId1]) REFERENCES [Courses] ([Id]),
    CONSTRAINT [FK_Payments_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Payments_Users_UserId1] FOREIGN KEY ([UserId1]) REFERENCES [Users] ([Id])
);
2025-05-02 16:40:57.046 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Quizzes] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_Quizzes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Quizzes_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE
);
2025-05-02 16:40:57.066 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Reviews] (
    [Id] int NOT NULL IDENTITY,
    [CourseId] int NOT NULL,
    [UserId] int NOT NULL,
    [Rating] int NOT NULL,
    [Comment] nvarchar(max) NULL,
    CONSTRAINT [PK_Reviews] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Reviews_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Reviews_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 16:40:57.080 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Questions] (
    [Id] int NOT NULL IDENTITY,
    [Text] nvarchar(max) NULL,
    [QuizId] int NOT NULL,
    CONSTRAINT [PK_Questions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Questions_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE
);
2025-05-02 16:40:57.093 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [QuizResults] (
    [Id] int NOT NULL IDENTITY,
    [QuizId] int NOT NULL,
    [UserId] int NOT NULL,
    [TotalQuestions] int NOT NULL,
    [CorrectAnswers] int NOT NULL,
    [SubmittedAt] datetime2 NOT NULL,
    [QuizId1] int NULL,
    CONSTRAINT [PK_QuizResults] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_QuizResults_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_QuizResults_Quizzes_QuizId1] FOREIGN KEY ([QuizId1]) REFERENCES [Quizzes] ([Id]),
    CONSTRAINT [FK_QuizResults_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 16:40:57.105 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Choices] (
    [Id] int NOT NULL IDENTITY,
    [Text] nvarchar(max) NULL,
    [IsCorrect] bit NOT NULL,
    [QuestionId] int NOT NULL,
    CONSTRAINT [PK_Choices] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Choices_Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [Questions] ([Id]) ON DELETE CASCADE
);
2025-05-02 16:40:57.117 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Choices_QuestionId] ON [Choices] ([QuestionId]);
2025-05-02 16:40:57.125 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Courses_CategoryId] ON [Courses] ([CategoryId]);
2025-05-02 16:40:57.131 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Courses_InstructorId] ON [Courses] ([InstructorId]);
2025-05-02 16:40:57.162 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmailConfirmationCodes_Email] ON [EmailConfirmationCodes] ([Email]);
2025-05-02 16:40:57.170 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Enrollments_CourseId] ON [Enrollments] ([CourseId]);
2025-05-02 16:40:57.184 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Enrollments_UserId] ON [Enrollments] ([UserId]);
2025-05-02 16:40:57.200 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Lessons_CourseId] ON [Lessons] ([CourseId]);
2025-05-02 16:40:57.214 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_CourseId] ON [Messages] ([CourseId]);
2025-05-02 16:40:57.220 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_ReplyToMessageId] ON [Messages] ([ReplyToMessageId]);
2025-05-02 16:40:57.234 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_SenderId] ON [Messages] ([SenderId]);
2025-05-02 16:40:57.248 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_UserId] ON [Notifications] ([UserId]);
2025-05-02 16:40:57.259 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_Email] ON [PasswordResetCodes] ([Email]);
2025-05-02 16:40:57.267 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_CourseId] ON [Payments] ([CourseId]);
2025-05-02 16:40:57.277 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_CourseId1] ON [Payments] ([CourseId1]);
2025-05-02 16:40:57.291 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_UserId] ON [Payments] ([UserId]);
2025-05-02 16:40:57.297 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_UserId1] ON [Payments] ([UserId1]);
2025-05-02 16:40:57.304 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Profiles_UserId] ON [Profiles] ([UserId]);
2025-05-02 16:40:57.311 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Questions_QuizId] ON [Questions] ([QuizId]);
2025-05-02 16:40:57.317 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizResults_QuizId] ON [QuizResults] ([QuizId]);
2025-05-02 16:40:57.326 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizResults_QuizId1] ON [QuizResults] ([QuizId1]);
2025-05-02 16:40:57.331 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizResults_UserId] ON [QuizResults] ([UserId]);
2025-05-02 16:40:57.336 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quizzes_CourseId] ON [Quizzes] ([CourseId]);
2025-05-02 16:40:57.344 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reviews_CourseId] ON [Reviews] ([CourseId]);
2025-05-02 16:40:57.349 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reviews_UserId] ON [Reviews] ([UserId]);
2025-05-02 16:40:57.357 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_UserRefreshTokens_RefreshToken] ON [UserRefreshTokens] ([RefreshToken]);
2025-05-02 16:40:57.363 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRefreshTokens_UserId] ON [UserRefreshTokens] ([UserId]);
2025-05-02 16:40:57.395 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250502134028_UpadateNotifications', N'8.0.0');
2025-05-02 16:41:33.657 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 16:41:33.768 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:41:33.780 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:41:33.785 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:41:33.854 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:41:33.859 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:41:34.597 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:41:34.650 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 16:41:34.661 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:41:34.673 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 16:41:34.728 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 16:41:34.780 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 16:41:35.271 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 16:41:36.327 +03:00 [INF] Executed DbCommand (81ms) [Parameters=[@p0='2025-05-02T13:41:35.7278167Z', @p1='admin@elearning.com' (Size = 4000), @p2='مدير النظام' (Size = 4000), @p3='True', @p4='$2a$11$inY57xCSxbdWs22WI2HN6eJCLisx1lyk8qzUzZbUrPLuVPibVTRJm' (Size = 4000), @p5='Admin' (Nullable = false) (Size = 4000), @p6=NULL (DbType = DateTime2), @p7='2025-05-02T13:41:35.9556662Z', @p8='instructor@elearning.com' (Size = 4000), @p9='مدرس نموذجي' (Size = 4000), @p10='True', @p11='$2a$11$hwCt5nTjvR4LJTq6cs6m1eEftq.PjZDiwzkOkl.2T3REN6An.8MA6' (Size = 4000), @p12='Instructor' (Nullable = false) (Size = 4000), @p13=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1)) AS i ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt])
VALUES (i.[CreatedAt], i.[Email], i.[FullName], i.[IsEmailConfirmed], i.[PasswordHash], i.[Role], i.[UpdatedAt])
OUTPUT INSERTED.[Id], i._Position;
2025-05-02 16:41:36.417 +03:00 [INF] تم تطبيق تحديثات قاعدة البيانات بنجاح
2025-05-02 16:42:15.429 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 16:42:15.619 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:42:15.664 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:42:15.673 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:42:15.764 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:42:15.819 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:42:16.737 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:42:16.945 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 16:42:16.965 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:42:16.984 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 16:42:17.123 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 16:42:17.182 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 16:42:17.708 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 16:42:17.806 +03:00 [INF] تم تطبيق تحديثات قاعدة البيانات بنجاح
2025-05-02 16:47:55.714 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 16:47:56.047 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:47:56.126 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:47:56.178 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:47:57.002 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:47:57.016 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:48:00.481 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:48:00.668 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 16:48:00.693 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:48:00.707 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 16:48:00.833 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 16:48:00.986 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 16:48:01.900 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 16:48:01.990 +03:00 [INF] تم تطبيق تحديثات قاعدة البيانات بنجاح
2025-05-02 16:52:32.244 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 16:52:32.667 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:52:32.734 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:52:32.739 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 16:52:33.393 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:52:33.408 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 16:52:41.342 +03:00 [INF] Executed DbCommand (183ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:52:41.606 +03:00 [INF] Executed DbCommand (122ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 16:52:41.677 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 16:52:41.724 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 16:52:41.907 +03:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 16:52:42.109 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 16:52:43.094 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 16:52:43.211 +03:00 [INF] Database updated successfully
2025-05-02 16:52:44.040 +03:00 [INF] Starting application...
2025-05-02 16:52:44.200 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 16:52:45.727 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 16:52:45.767 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 16:52:46.260 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 16:52:46.300 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 16:52:46.356 +03:00 [INF] Hosting environment: Development
2025-05-02 16:52:46.476 +03:00 [INF] Content root path: C:\Users\ta\OneDrive\Desktop\gpfirst
2025-05-02 16:52:48.001 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 1740.1072ms
2025-05-02 16:52:51.222 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 16:52:51.252 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 29.8663ms
2025-05-02 16:52:53.656 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 16:52:53.989 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 16:52:54.092 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/_framework/aspnetcore-browser-refresh.js - 200 13756 application/javascript; charset=utf-8 103.1022ms
2025-05-02 16:52:54.704 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/_vs/browserLink - null null
2025-05-02 16:52:54.967 +03:00 [INF] HTTP GET /swagger-ui/custom.css responded 404 in 1267.0536 ms
2025-05-02 16:52:55.007 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 1350.9275ms
2025-05-02 16:52:55.026 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 16:52:55.122 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/_vs/browserLink - 200 null text/javascript; charset=UTF-8 417.9277ms
2025-05-02 16:52:56.609 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 16:52:57.206 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 597.4714ms
2025-05-02 17:13:38.317 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 17:13:38.887 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:13:38.905 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:13:38.908 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:13:39.047 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 17:13:39.084 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 17:13:39.806 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:13:39.815 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:13:39.829 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:13:39.925 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 17:13:39.930 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 17:14:23.489 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 17:14:23.839 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:14:23.853 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:14:23.863 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:14:23.988 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 17:14:24.428 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 17:14:26.335 +03:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 17:14:26.428 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 17:14:26.456 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 17:14:26.525 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 17:14:26.768 +03:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 17:14:26.840 +03:00 [INF] Applying migration '20250502141341_AddDecimalPrecisionAndFixUserRelations'.
2025-05-02 17:14:27.488 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250502141341_AddDecimalPrecisionAndFixUserRelations', N'8.0.0');
2025-05-02 17:14:52.998 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 17:14:53.167 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:14:53.218 +03:00 [WRN] The foreign key property 'Payment.UserId1' was created in shadow state because a conflicting property with the simple name 'UserId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:14:53.238 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:14:53.397 +03:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Course'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 17:14:53.410 +03:00 [WRN] No store type was specified for the decimal property 'Amount' on entity type 'Payment'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-05-02 17:14:54.981 +03:00 [INF] Executed DbCommand (166ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 17:14:55.184 +03:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 17:14:55.205 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 17:14:55.227 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 17:14:55.327 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 17:14:55.473 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 17:14:56.282 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 17:14:56.358 +03:00 [INF] Database updated successfully
2025-05-02 17:14:56.886 +03:00 [INF] Starting application...
2025-05-02 17:14:56.927 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 17:14:57.348 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 17:14:57.352 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 17:14:57.361 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 17:14:57.365 +03:00 [INF] Hosting environment: Development
2025-05-02 17:14:57.367 +03:00 [INF] Content root path: C:\Users\ta\OneDrive\Desktop\gpfirst
2025-05-02 17:15:08.840 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/_framework/aspnetcore-browser-refresh.js - null null
2025-05-02 17:15:09.214 +03:00 [INF] HTTP GET /_framework/aspnetcore-browser-refresh.js responded 404 in 241.6834 ms
2025-05-02 17:15:09.235 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/_framework/aspnetcore-browser-refresh.js - 404 0 null 399.8072ms
2025-05-02 17:15:09.266 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/_framework/aspnetcore-browser-refresh.js, Response status code: 404
2025-05-02 17:15:09.431 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 17:15:10.333 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 901.2626ms
2025-05-02 17:16:03.730 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/register - application/json 107
2025-05-02 17:16:03.753 +03:00 [INF] CORS policy execution failed.
2025-05-02 17:16:03.863 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 17:16:03.912 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 17:16:03.978 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(e_learning.DTOs.UserRegisterDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 17:16:04.913 +03:00 [INF] Executed DbCommand (150ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__dto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 17:16:06.495 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[@p0='2025-05-02T14:16:05.6476320Z', @p1='abdomoka2018@gmail.com' (Size = 4000), @p2='Abdo' (Size = 4000), @p3='False', @p4='$2a$11$56oKYy9Ikjeqru3lEEUvXeWQBo2f/5MAcN6neklnJI1PD6Lgqxe9q' (Size = 4000), @p5='Admin' (Nullable = false) (Size = 4000), @p6=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-02 17:16:06.846 +03:00 [INF] Executed DbCommand (76ms) [Parameters=[@p0='334589' (Nullable = false) (Size = 6), @p1='2025-05-02T14:16:06.6382244Z', @p2='abdomoka2018@gmail.com' (Nullable = false) (Size = 450), @p3='2025-05-02T14:26:06.6383638Z'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [EmailConfirmationCodes] ([Code], [CreatedAt], [Email], [ExpiryDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-05-02 17:16:12.343 +03:00 [INF] تم إرسال البريد إلى abdomoka2018@gmail.com بنجاح
2025-05-02 17:16:12.349 +03:00 [INF] تم تسجيل مستخدم جديد - ID: 3
2025-05-02 17:16:12.411 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse`1[[e_learning.DTOs.Responses.RegisterResponse, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 17:16:12.570 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Register (e_learning) in 8569.9062ms
2025-05-02 17:16:12.577 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 17:16:12.583 +03:00 [INF] HTTP POST /api/Auth/register responded 200 in 8848.0849 ms
2025-05-02 17:16:12.627 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/register - 200 null application/json; charset=utf-8 8896.7236ms
2025-05-02 17:17:18.152 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/confirm-email - application/json 59
2025-05-02 17:17:18.257 +03:00 [INF] CORS policy execution failed.
2025-05-02 17:17:18.259 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 17:17:18.274 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.ConfirmEmail (e_learning)'
2025-05-02 17:17:18.293 +03:00 [INF] Route matched with {action = "ConfirmEmail", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmEmail(e_learning.DTOs.ConfirmEmailDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 17:17:18.778 +03:00 [INF] Executed DbCommand (99ms) [Parameters=[@__ToLower_0='abdomoka2018@gmail.com' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Code], [e].[CreatedAt], [e].[Email], [e].[ExpiryDate]
FROM [EmailConfirmationCodes] AS [e]
WHERE [e].[Email] = @__ToLower_0 AND [e].[ExpiryDate] > GETUTCDATE()
ORDER BY [e].[ExpiryDate] DESC
2025-05-02 17:17:18.946 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 17:17:19.080 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[@p1='3', @p0='True'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [IsEmailConfirmed] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-05-02 17:17:19.246 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__ToLower_0='abdomoka2018@gmail.com' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Code], [e].[CreatedAt], [e].[Email], [e].[ExpiryDate]
FROM [EmailConfirmationCodes] AS [e]
WHERE [e].[Email] = @__ToLower_0
2025-05-02 17:17:19.326 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='1'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [EmailConfirmationCodes]
OUTPUT 1
WHERE [Id] = @p0;
2025-05-02 17:17:19.362 +03:00 [INF] تم تأكيد البريد الإلكتروني لـ: abdomoka2018@gmail.com
2025-05-02 17:17:19.378 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 17:17:19.444 +03:00 [INF] Executed action e_learning.Controllers.AuthController.ConfirmEmail (e_learning) in 1145.7204ms
2025-05-02 17:17:20.237 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.ConfirmEmail (e_learning)'
2025-05-02 17:17:20.265 +03:00 [INF] HTTP POST /api/Auth/confirm-email responded 200 in 2020.1222 ms
2025-05-02 17:17:20.354 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/confirm-email - 200 null application/json; charset=utf-8 2201.0241ms
2025-05-02 17:17:48.420 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 66
2025-05-02 17:17:48.512 +03:00 [INF] CORS policy execution failed.
2025-05-02 17:17:48.525 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 17:17:48.535 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 17:17:48.563 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 17:17:48.700 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 17:17:50.023 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='2025-05-02T14:17:49.7789126Z', @p1='2025-05-09T14:17:49.7787207Z', @p2='zTPRJR/MESPO447FbdrQlV6pGW1Udn9x83i+MabHDXpK5mgocJTIRzNnVhmaVUrjxL91W8lEQZYt7BTQh1gK8A==' (Nullable = false) (Size = 450), @p3='3'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([CreatedAt], [ExpiryDate], [RefreshToken], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-05-02 17:17:50.073 +03:00 [INF] تم تسجيل دخول ناجح لـ: abdomoka2018@gmail.com
2025-05-02 17:17:50.079 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse`1[[e_learning.DTOs.Responses.LoginResponse, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 17:17:50.127 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 1549.7229ms
2025-05-02 17:17:50.136 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 17:17:50.141 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 1629.7196 ms
2025-05-02 17:17:50.171 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 200 null application/json; charset=utf-8 1751.1811ms
2025-05-02 17:19:03.767 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Profile - application/json 118
2025-05-02 17:19:03.773 +03:00 [INF] CORS policy execution failed.
2025-05-02 17:19:03.817 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 17:19:03.996 +03:00 [INF] Executing endpoint 'e_learning.Controllers.ProfileController.CreateProfile (e_learning)'
2025-05-02 17:19:04.013 +03:00 [INF] Route matched with {action = "CreateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProfile(CreateProfileDto) on controller e_learning.Controllers.ProfileController (e_learning).
2025-05-02 17:19:04.188 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Profiles] AS [p]
        WHERE [p].[UserId] = @__userId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 17:19:04.301 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='helwan' (Size = 4000), @p1='string' (Size = 4000), @p2='2025-05-02T14:19:04.2058182Z', @p3='01258558985' (Size = 4000), @p4='string' (Size = 4000), @p5='2025-05-02T14:19:04.2059461Z', @p6='3'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Profiles] ([Address], [Bio], [CreatedAt], [Phone], [ProfilePicture], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-02 17:19:04.397 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-05-02 17:19:04.429 +03:00 [INF] Executed action e_learning.Controllers.ProfileController.CreateProfile (e_learning) in 409.4479ms
2025-05-02 17:19:04.449 +03:00 [INF] Executed endpoint 'e_learning.Controllers.ProfileController.CreateProfile (e_learning)'
2025-05-02 17:19:04.463 +03:00 [INF] HTTP POST /api/Profile responded 200 in 690.1431 ms
2025-05-02 17:19:04.501 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Profile - 200 null text/plain; charset=utf-8 734.3734ms
2025-05-02 17:19:22.830 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7056/api/Profile - application/json 143
2025-05-02 17:19:22.836 +03:00 [INF] CORS policy execution failed.
2025-05-02 17:19:22.840 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 17:19:22.859 +03:00 [INF] Executing endpoint 'e_learning.Controllers.ProfileController.UpdateProfile (e_learning)'
2025-05-02 17:19:22.893 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(e_learning.DTOs.UpdateProfileDto) on controller e_learning.Controllers.ProfileController (e_learning).
2025-05-02 17:19:23.437 +03:00 [INF] Executed DbCommand (41ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Bio], [p].[CreatedAt], [p].[Phone], [p].[ProfilePicture], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Profiles] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
WHERE [p].[UserId] = @__userId_0
2025-05-02 17:19:23.794 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[@p3='1', @p0='string' (Size = 4000), @p1='012255555' (Size = 4000), @p2='2025-05-02T14:19:23.5373229Z', @p6='3', @p4='string' (Size = 4000), @p5='string' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Profiles] SET [Address] = @p0, [Phone] = @p1, [UpdatedAt] = @p2
OUTPUT 1
WHERE [Id] = @p3;
UPDATE [Users] SET [Email] = @p4, [FullName] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-05-02 17:19:23.898 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Bio], [p].[CreatedAt], [p].[Phone], [p].[ProfilePicture], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Profiles] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
WHERE [p].[UserId] = @__userId_0
2025-05-02 17:19:24.042 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[e_learning.Models.Profile, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 17:19:24.264 +03:00 [INF] Executed action e_learning.Controllers.ProfileController.UpdateProfile (e_learning) in 1365.6899ms
2025-05-02 17:19:24.311 +03:00 [INF] Executed endpoint 'e_learning.Controllers.ProfileController.UpdateProfile (e_learning)'
2025-05-02 17:19:24.321 +03:00 [INF] HTTP PUT /api/Profile responded 200 in 1485.4989 ms
2025-05-02 17:19:24.429 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7056/api/Profile - 200 null application/json; charset=utf-8 1598.6764ms
2025-05-02 17:19:47.515 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/api/Profile/me - null null
2025-05-02 17:19:47.527 +03:00 [INF] Executing endpoint 'e_learning.Controllers.ProfileController.GetMyProfile (e_learning)'
2025-05-02 17:19:47.613 +03:00 [INF] Route matched with {action = "GetMyProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyProfile() on controller e_learning.Controllers.ProfileController (e_learning).
2025-05-02 17:19:47.718 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Bio], [p].[CreatedAt], [p].[Phone], [p].[ProfilePicture], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Profiles] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
WHERE [p].[UserId] = @__userId_0
2025-05-02 17:19:47.771 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.ProfileResponseDto'.
2025-05-02 17:19:47.793 +03:00 [INF] Executed action e_learning.Controllers.ProfileController.GetMyProfile (e_learning) in 165.3281ms
2025-05-02 17:19:47.801 +03:00 [INF] Executed endpoint 'e_learning.Controllers.ProfileController.GetMyProfile (e_learning)'
2025-05-02 17:19:47.815 +03:00 [INF] HTTP GET /api/Profile/me responded 200 in 293.2567 ms
2025-05-02 17:19:47.830 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/api/Profile/me - 200 null application/json; charset=utf-8 314.5958ms
2025-05-02 17:20:52.633 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Course - application/json 126
2025-05-02 17:20:52.650 +03:00 [INF] CORS policy execution failed.
2025-05-02 17:20:52.663 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 17:20:52.684 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 17:20:52.721 +03:00 [INF] Route matched with {action = "AddCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCourse(e_learning.DTOs.Courses.CourseCreateDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 17:20:52.779 +03:00 [INF] Executed action e_learning.Controllers.CourseController.AddCourse (e_learning) in 15.6966ms
2025-05-02 17:20:52.792 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 17:20:52.796 +03:00 [ERR] HTTP POST /api/Course responded 500 in 146.4293 ms
System.InvalidOperationException: Unable to resolve service for type 'e_learning.Repositories.Interfaces.ICourseRepository' while attempting to activate 'e_learning.Controllers.CourseController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method553(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-02 17:20:52.896 +03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'e_learning.Repositories.Interfaces.ICourseRepository' while attempting to activate 'e_learning.Controllers.CourseController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method553(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-02 17:20:52.935 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Course - 500 null text/plain; charset=utf-8 302.067ms
2025-05-02 17:26:02.244 +03:00 [INF] Application is shutting down...
2025-05-02 17:26:59.373 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 17:26:59.681 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:26:59.704 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 17:27:01.273 +03:00 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 17:27:01.406 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 17:27:01.430 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 17:27:01.456 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 17:27:01.564 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 17:27:01.673 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 17:27:02.323 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 17:27:02.405 +03:00 [INF] Database updated successfully
2025-05-02 17:27:02.736 +03:00 [INF] Starting application...
2025-05-02 17:27:02.811 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 17:27:03.270 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 17:27:03.271 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 17:27:03.281 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 17:27:03.296 +03:00 [INF] Hosting environment: Development
2025-05-02 17:27:03.302 +03:00 [INF] Content root path: C:\Users\ta\OneDrive\Desktop\gpfirst
2025-05-02 17:27:30.352 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 17:27:30.704 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 363.042ms
2025-05-02 17:27:30.741 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 17:27:31.233 +03:00 [INF] HTTP GET /swagger-ui/custom.css responded 404 in 273.1305 ms
2025-05-02 17:27:31.260 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 518.3707ms
2025-05-02 17:27:31.335 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 17:27:31.923 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 17:27:32.624 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 701.4935ms
2025-05-02 17:27:42.116 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 66
2025-05-02 17:27:42.130 +03:00 [INF] CORS policy execution failed.
2025-05-02 17:27:42.154 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 17:27:42.192 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 17:27:42.292 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 17:27:43.231 +03:00 [INF] Executed DbCommand (59ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 17:27:43.304 +03:00 [WRN] محاولة دخول فاشلة للبريد: abdomoka2018@gmail.com
2025-05-02 17:27:43.392 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 17:27:43.472 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 1160.767ms
2025-05-02 17:27:43.476 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 17:27:43.485 +03:00 [INF] HTTP POST /api/Auth/login responded 401 in 1364.3587 ms
2025-05-02 17:27:43.535 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 401 null application/json; charset=utf-8 1419.0555ms
2025-05-02 17:43:04.050 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 66
2025-05-02 17:43:04.088 +03:00 [INF] CORS policy execution failed.
2025-05-02 17:43:04.089 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 17:43:04.102 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 17:43:04.105 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 17:43:04.557 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 17:43:04.574 +03:00 [WRN] محاولة دخول فاشلة للبريد: abdomoka2018@gmail.com
2025-05-02 17:43:04.587 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 17:43:04.595 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 484.511ms
2025-05-02 17:43:04.605 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 17:43:04.609 +03:00 [INF] HTTP POST /api/Auth/login responded 401 in 534.6193 ms
2025-05-02 17:43:04.640 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 401 null application/json; charset=utf-8 590.2586ms
2025-05-02 18:11:48.774 +03:00 [INF] Application is shutting down...
2025-05-02 18:13:48.552 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 18:13:48.798 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:13:48.815 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:13:51.690 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:13:51.732 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:13:53.799 +03:00 [INF] Executed DbCommand (1,516ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [E_LearningDB];
2025-05-02 18:13:54.382 +03:00 [INF] Executed DbCommand (484ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [E_LearningDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-05-02 18:13:54.532 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:13:54.789 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-05-02 18:13:54.810 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:13:54.932 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:13:54.995 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 18:13:55.140 +03:00 [INF] Applying migration '20250502134028_UpadateNotifications'.
2025-05-02 18:13:55.459 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Categories] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([Id])
);
2025-05-02 18:13:55.479 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [EmailConfirmationCodes] (
    [Id] int NOT NULL IDENTITY,
    [Email] nvarchar(450) NOT NULL,
    [Code] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETDATE()),
    CONSTRAINT [PK_EmailConfirmationCodes] PRIMARY KEY ([Id])
);
2025-05-02 18:13:55.495 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [Email] nvarchar(450) NOT NULL,
    [Code] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETDATE()),
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id])
);
2025-05-02 18:13:55.511 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [PasswordHash] nvarchar(max) NULL,
    [Role] nvarchar(max) NOT NULL,
    [IsEmailConfirmed] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-05-02 18:13:55.541 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Title] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Price] decimal(18,2) NOT NULL,
    [ImageUrl] nvarchar(max) NULL,
    [IsActive] bit NULL,
    [CategoryId] int NOT NULL,
    [InstructorId] int NOT NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Courses_Users_InstructorId] FOREIGN KEY ([InstructorId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 18:13:55.593 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(100) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [UserId] int NOT NULL,
    [SenderId] nvarchar(max) NULL,
    [IsRead] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    [NotificationType] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Notifications_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:13:55.616 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Profiles] (
    [Id] int NOT NULL IDENTITY,
    [Bio] nvarchar(max) NULL,
    [ProfilePicture] nvarchar(max) NULL,
    [Address] nvarchar(max) NULL,
    [Phone] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NOT NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_Profiles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Profiles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:13:55.670 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRefreshTokens] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [RefreshToken] nvarchar(450) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETDATE()),
    CONSTRAINT [PK_UserRefreshTokens] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRefreshTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:13:55.692 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Enrollments] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_Enrollments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Enrollments_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Enrollments_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 18:13:55.712 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Lessons] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NULL,
    [VideoUrl] nvarchar(max) NULL,
    [AttachmentUrl] nvarchar(max) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_Lessons] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Lessons_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:13:55.733 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [CourseId] int NOT NULL,
    [Text] nvarchar(max) NULL,
    [AttachmentUrl] nvarchar(max) NULL,
    [SentAt] datetime2 NOT NULL,
    [ReplyToMessageId] int NULL,
    [IsSeen] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Messages_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Messages_ReplyToMessageId] FOREIGN KEY ([ReplyToMessageId]) REFERENCES [Messages] ([Id]),
    CONSTRAINT [FK_Messages_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:13:55.759 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [CourseId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [PaymentMethod] nvarchar(max) NULL,
    [IsSuccessful] bit NOT NULL,
    [PaidAt] datetime2 NOT NULL,
    [TransactionId] nvarchar(max) NULL,
    [CourseId1] int NULL,
    [UserId1] int NULL,
    CONSTRAINT [PK_Payments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Payments_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Payments_Courses_CourseId1] FOREIGN KEY ([CourseId1]) REFERENCES [Courses] ([Id]),
    CONSTRAINT [FK_Payments_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Payments_Users_UserId1] FOREIGN KEY ([UserId1]) REFERENCES [Users] ([Id])
);
2025-05-02 18:13:55.783 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Quizzes] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_Quizzes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Quizzes_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:13:55.808 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Reviews] (
    [Id] int NOT NULL IDENTITY,
    [CourseId] int NOT NULL,
    [UserId] int NOT NULL,
    [Rating] int NOT NULL,
    [Comment] nvarchar(max) NULL,
    CONSTRAINT [PK_Reviews] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Reviews_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Reviews_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 18:13:55.829 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Questions] (
    [Id] int NOT NULL IDENTITY,
    [Text] nvarchar(max) NULL,
    [QuizId] int NOT NULL,
    CONSTRAINT [PK_Questions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Questions_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:13:55.858 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [QuizResults] (
    [Id] int NOT NULL IDENTITY,
    [QuizId] int NOT NULL,
    [UserId] int NOT NULL,
    [TotalQuestions] int NOT NULL,
    [CorrectAnswers] int NOT NULL,
    [SubmittedAt] datetime2 NOT NULL,
    [QuizId1] int NULL,
    CONSTRAINT [PK_QuizResults] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_QuizResults_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_QuizResults_Quizzes_QuizId1] FOREIGN KEY ([QuizId1]) REFERENCES [Quizzes] ([Id]),
    CONSTRAINT [FK_QuizResults_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:13:55.894 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Choices] (
    [Id] int NOT NULL IDENTITY,
    [Text] nvarchar(max) NULL,
    [IsCorrect] bit NOT NULL,
    [QuestionId] int NOT NULL,
    CONSTRAINT [PK_Choices] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Choices_Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [Questions] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:13:55.917 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Choices_QuestionId] ON [Choices] ([QuestionId]);
2025-05-02 18:13:55.928 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Courses_CategoryId] ON [Courses] ([CategoryId]);
2025-05-02 18:13:55.940 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Courses_InstructorId] ON [Courses] ([InstructorId]);
2025-05-02 18:13:55.950 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmailConfirmationCodes_Email] ON [EmailConfirmationCodes] ([Email]);
2025-05-02 18:13:55.959 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Enrollments_CourseId] ON [Enrollments] ([CourseId]);
2025-05-02 18:13:55.967 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Enrollments_UserId] ON [Enrollments] ([UserId]);
2025-05-02 18:13:55.975 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Lessons_CourseId] ON [Lessons] ([CourseId]);
2025-05-02 18:13:55.984 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_CourseId] ON [Messages] ([CourseId]);
2025-05-02 18:13:55.993 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_ReplyToMessageId] ON [Messages] ([ReplyToMessageId]);
2025-05-02 18:13:56.003 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_SenderId] ON [Messages] ([SenderId]);
2025-05-02 18:13:56.021 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_UserId] ON [Notifications] ([UserId]);
2025-05-02 18:13:56.040 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_Email] ON [PasswordResetCodes] ([Email]);
2025-05-02 18:13:56.063 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_CourseId] ON [Payments] ([CourseId]);
2025-05-02 18:13:56.203 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_CourseId1] ON [Payments] ([CourseId1]);
2025-05-02 18:13:56.233 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_UserId] ON [Payments] ([UserId]);
2025-05-02 18:13:56.246 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_UserId1] ON [Payments] ([UserId1]);
2025-05-02 18:13:56.262 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Profiles_UserId] ON [Profiles] ([UserId]);
2025-05-02 18:13:56.276 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Questions_QuizId] ON [Questions] ([QuizId]);
2025-05-02 18:13:56.289 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizResults_QuizId] ON [QuizResults] ([QuizId]);
2025-05-02 18:13:56.302 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizResults_QuizId1] ON [QuizResults] ([QuizId1]);
2025-05-02 18:13:56.315 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizResults_UserId] ON [QuizResults] ([UserId]);
2025-05-02 18:13:56.337 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quizzes_CourseId] ON [Quizzes] ([CourseId]);
2025-05-02 18:13:56.535 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reviews_CourseId] ON [Reviews] ([CourseId]);
2025-05-02 18:13:56.555 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reviews_UserId] ON [Reviews] ([UserId]);
2025-05-02 18:13:56.578 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_UserRefreshTokens_RefreshToken] ON [UserRefreshTokens] ([RefreshToken]);
2025-05-02 18:13:56.796 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRefreshTokens_UserId] ON [UserRefreshTokens] ([UserId]);
2025-05-02 18:13:56.922 +03:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250502134028_UpadateNotifications', N'8.0.0');
2025-05-02 18:13:56.999 +03:00 [INF] Applying migration '20250502141341_AddDecimalPrecisionAndFixUserRelations'.
2025-05-02 18:13:57.256 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250502141341_AddDecimalPrecisionAndFixUserRelations', N'8.0.0');
2025-05-02 18:13:58.255 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 18:13:59.755 +03:00 [INF] Executed DbCommand (87ms) [Parameters=[@p0='2025-05-02T15:13:58.8290205Z', @p1='admin@elearning.com' (Size = 4000), @p2='مدير النظام' (Size = 4000), @p3='True', @p4='$2a$11$9UaE9RuC/4a1wz/Ca/ZyguDzQLCAxGnTTKQGU0.SrUoW/8aO9f9gW' (Size = 4000), @p5='Admin' (Nullable = false) (Size = 4000), @p6=NULL (DbType = DateTime2), @p7='2025-05-02T15:13:59.1571176Z', @p8='instructor@elearning.com' (Size = 4000), @p9='مدرس نموذجي' (Size = 4000), @p10='True', @p11='$2a$11$Q2bpu78po3aNZbfz.niF5u83vnq/YklxS4FRMY3i/g7i19LUmVI76' (Size = 4000), @p12='Instructor' (Nullable = false) (Size = 4000), @p13=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1)) AS i ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt])
VALUES (i.[CreatedAt], i.[Email], i.[FullName], i.[IsEmailConfirmed], i.[PasswordHash], i.[Role], i.[UpdatedAt])
OUTPUT INSERTED.[Id], i._Position;
2025-05-02 18:13:59.864 +03:00 [INF] Database updated successfully
2025-05-02 18:14:00.405 +03:00 [INF] Starting application...
2025-05-02 18:14:00.443 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 18:14:00.832 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 18:14:00.839 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 18:14:00.848 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 18:14:00.852 +03:00 [INF] Hosting environment: Development
2025-05-02 18:14:00.854 +03:00 [INF] Content root path: C:\Users\ta\OneDrive\Desktop\gpfirst
2025-05-02 18:14:10.849 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 18:14:11.186 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 341.8091ms
2025-05-02 18:14:11.312 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 18:14:11.790 +03:00 [INF] HTTP GET /swagger-ui/custom.css responded 404 in 456.9422 ms
2025-05-02 18:14:11.804 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 490.6461ms
2025-05-02 18:14:11.818 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 18:14:12.210 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 18:14:13.095 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 884.9789ms
2025-05-02 18:14:59.110 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/register - application/json 107
2025-05-02 18:14:59.214 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:14:59.217 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:14:59.240 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 18:14:59.326 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(e_learning.DTOs.UserRegisterDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:15:00.642 +03:00 [INF] Executed DbCommand (102ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__dto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 18:15:01.443 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@p0='2025-05-02T15:15:01.3577321Z', @p1='abdomoka2018@gmail.com' (Size = 4000), @p2='Abdo' (Size = 4000), @p3='False', @p4='$2a$11$sWFkElb919gA7.DHnATM5OpaHkyE4R/JBfY47zZ9sA2lPpYO/d4dK' (Size = 4000), @p5='Admin' (Nullable = false) (Size = 4000), @p6=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-02 18:15:01.860 +03:00 [INF] Executed DbCommand (118ms) [Parameters=[@p0='947070' (Nullable = false) (Size = 6), @p1='2025-05-02T15:15:01.5180918Z', @p2='abdomoka2018@gmail.com' (Nullable = false) (Size = 450), @p3='2025-05-02T15:25:01.5183597Z'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [EmailConfirmationCodes] ([Code], [CreatedAt], [Email], [ExpiryDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-05-02 18:15:07.560 +03:00 [INF] تم إرسال البريد إلى abdomoka2018@gmail.com بنجاح
2025-05-02 18:15:07.569 +03:00 [INF] تم تسجيل مستخدم جديد - ID: 3
2025-05-02 18:15:07.619 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse`1[[e_learning.DTOs.Responses.RegisterResponse, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 18:15:07.705 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Register (e_learning) in 8350.0005ms
2025-05-02 18:15:07.716 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 18:15:07.723 +03:00 [INF] HTTP POST /api/Auth/register responded 200 in 8521.6428 ms
2025-05-02 18:15:07.764 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/register - 200 null application/json; charset=utf-8 8653.7151ms
2025-05-02 18:15:46.245 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/confirm-email - application/json 59
2025-05-02 18:15:46.339 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:15:46.342 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:15:46.353 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.ConfirmEmail (e_learning)'
2025-05-02 18:15:46.367 +03:00 [INF] Route matched with {action = "ConfirmEmail", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmEmail(e_learning.DTOs.ConfirmEmailDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:15:46.694 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@__ToLower_0='abdomoka2018@gmail.com' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Code], [e].[CreatedAt], [e].[Email], [e].[ExpiryDate]
FROM [EmailConfirmationCodes] AS [e]
WHERE [e].[Email] = @__ToLower_0 AND [e].[ExpiryDate] > GETUTCDATE()
ORDER BY [e].[ExpiryDate] DESC
2025-05-02 18:15:46.786 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 18:15:46.930 +03:00 [INF] Executed DbCommand (73ms) [Parameters=[@p1='3', @p0='True'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [IsEmailConfirmed] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-05-02 18:15:47.020 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__ToLower_0='abdomoka2018@gmail.com' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Code], [e].[CreatedAt], [e].[Email], [e].[ExpiryDate]
FROM [EmailConfirmationCodes] AS [e]
WHERE [e].[Email] = @__ToLower_0
2025-05-02 18:15:47.180 +03:00 [INF] Executed DbCommand (108ms) [Parameters=[@p0='1'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [EmailConfirmationCodes]
OUTPUT 1
WHERE [Id] = @p0;
2025-05-02 18:15:47.233 +03:00 [INF] تم تأكيد البريد الإلكتروني لـ: abdomoka2018@gmail.com
2025-05-02 18:15:47.240 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 18:15:47.261 +03:00 [INF] Executed action e_learning.Controllers.AuthController.ConfirmEmail (e_learning) in 886.8188ms
2025-05-02 18:15:47.267 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.ConfirmEmail (e_learning)'
2025-05-02 18:15:47.272 +03:00 [INF] HTTP POST /api/Auth/confirm-email responded 200 in 941.2648 ms
2025-05-02 18:15:47.287 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/confirm-email - 200 null application/json; charset=utf-8 1041.5291ms
2025-05-02 18:16:17.112 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 67
2025-05-02 18:16:17.117 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:16:17.119 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:16:17.123 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:16:17.202 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:16:17.313 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 18:16:18.215 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@p0='2025-05-02T15:16:18.0714366Z', @p1='2025-05-09T15:16:18.0712704Z', @p2='oQVbwWAc2s7Qzy592h5PwUFoKyYjZVjK3mbstfJ6mDQJStQG6ai4x0oZDVrE2lKmpp1NlFKw5FjDFXFvXVI2aQ==' (Nullable = false) (Size = 450), @p3='3'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([CreatedAt], [ExpiryDate], [RefreshToken], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-05-02 18:16:18.261 +03:00 [INF] تم تسجيل دخول ناجح لـ: abdomoka2018@gmail.com
2025-05-02 18:16:18.268 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse`1[[e_learning.DTOs.Responses.LoginResponse, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 18:16:18.371 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 1156.6041ms
2025-05-02 18:16:18.384 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:16:18.386 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 1269.3590 ms
2025-05-02 18:16:18.404 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 200 null application/json; charset=utf-8 1291.9999ms
2025-05-02 18:16:34.886 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 18:16:34.930 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 43.8635ms
2025-05-02 18:16:34.983 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 18:16:35.012 +03:00 [INF] HTTP GET /swagger-ui/custom.css responded 404 in 0.8156 ms
2025-05-02 18:16:35.015 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 32.0151ms
2025-05-02 18:16:35.023 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 18:16:35.246 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 18:16:35.505 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 257.2905ms
2025-05-02 18:16:42.133 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 67
2025-05-02 18:16:42.280 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:16:42.285 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:16:42.326 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:16:42.533 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:16:42.789 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 18:16:43.496 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='2025-05-02T15:16:43.4659325Z', @p1='2025-05-09T15:16:43.4658705Z', @p2='K49O4iC6AmAm5+oeBcv8S4m7Mfj7Ps6agnLFZcRvtWVJKgCha/hu0/al6oXCvM2HZ0/wKEDUnI8PHZ3fa3wA7Q==' (Nullable = false) (Size = 450), @p3='3'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([CreatedAt], [ExpiryDate], [RefreshToken], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-05-02 18:16:43.532 +03:00 [INF] تم تسجيل دخول ناجح لـ: abdomoka2018@gmail.com
2025-05-02 18:16:43.535 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse`1[[e_learning.DTOs.Responses.LoginResponse, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 18:16:43.545 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 809.1083ms
2025-05-02 18:16:43.576 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:16:43.582 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 1302.2749 ms
2025-05-02 18:16:43.596 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 200 null application/json; charset=utf-8 1463.5095ms
2025-05-02 18:16:50.725 +03:00 [INF] Application is shutting down...
2025-05-02 18:17:19.654 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 18:17:19.888 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:17:19.902 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:17:21.307 +03:00 [INF] Executed DbCommand (101ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:17:21.415 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:17:21.429 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:17:21.439 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:17:21.481 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 18:17:21.609 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 18:17:22.312 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 18:17:22.382 +03:00 [INF] Database updated successfully
2025-05-02 18:17:22.793 +03:00 [INF] Starting application...
2025-05-02 18:17:22.829 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 18:17:23.235 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 18:17:23.237 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 18:17:23.243 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 18:17:23.245 +03:00 [INF] Hosting environment: Development
2025-05-02 18:17:23.247 +03:00 [INF] Content root path: C:\Users\ta\OneDrive\Desktop\gpfirst
2025-05-02 18:17:47.788 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 18:17:48.119 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 333.8461ms
2025-05-02 18:17:48.758 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 18:17:49.045 +03:00 [INF] HTTP GET /swagger-ui/custom.css responded 404 in 261.8500 ms
2025-05-02 18:17:49.061 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 302.5072ms
2025-05-02 18:17:49.121 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 18:17:51.753 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 18:17:52.399 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 645.798ms
2025-05-02 18:19:04.169 +03:00 [INF] Application is shutting down...
2025-05-02 18:20:01.734 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 18:20:02.078 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:20:02.106 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:20:02.897 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:20:02.900 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:20:34.340 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 18:20:34.572 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:20:34.593 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:20:36.009 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:20:36.013 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:20:36.734 +03:00 [INF] Executed DbCommand (526ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [E_LearningDB];
2025-05-02 18:20:36.917 +03:00 [INF] Executed DbCommand (166ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [E_LearningDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-05-02 18:20:37.051 +03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:20:37.194 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-05-02 18:20:37.207 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:20:37.255 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:20:37.300 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 18:20:37.339 +03:00 [INF] Applying migration '20250502152004_UpadateNotifications'.
2025-05-02 18:20:37.542 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Categories] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([Id])
);
2025-05-02 18:20:37.556 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [EmailConfirmationCodes] (
    [Id] int NOT NULL IDENTITY,
    [Email] nvarchar(450) NOT NULL,
    [Code] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETDATE()),
    CONSTRAINT [PK_EmailConfirmationCodes] PRIMARY KEY ([Id])
);
2025-05-02 18:20:37.571 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [Email] nvarchar(450) NOT NULL,
    [Code] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETDATE()),
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id])
);
2025-05-02 18:20:37.584 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [PasswordHash] nvarchar(max) NULL,
    [Role] nvarchar(max) NOT NULL,
    [IsEmailConfirmed] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-05-02 18:20:37.599 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Title] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Price] decimal(18,2) NOT NULL,
    [ImageUrl] nvarchar(max) NULL,
    [IsActive] bit NULL,
    [CategoryId] int NOT NULL,
    [InstructorId] int NOT NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Courses_Users_InstructorId] FOREIGN KEY ([InstructorId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 18:20:37.619 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(100) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [UserId] int NOT NULL,
    [SenderId] nvarchar(max) NULL,
    [IsRead] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    [NotificationType] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Notifications_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:20:37.631 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Profiles] (
    [Id] int NOT NULL IDENTITY,
    [Bio] nvarchar(max) NULL,
    [ProfilePicture] nvarchar(max) NULL,
    [Address] nvarchar(max) NULL,
    [Phone] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NOT NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_Profiles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Profiles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:20:37.653 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRefreshTokens] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [RefreshToken] nvarchar(450) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETDATE()),
    CONSTRAINT [PK_UserRefreshTokens] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRefreshTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:20:37.671 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Enrollments] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_Enrollments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Enrollments_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Enrollments_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 18:20:37.693 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Lessons] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NULL,
    [VideoUrl] nvarchar(max) NULL,
    [AttachmentUrl] nvarchar(max) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_Lessons] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Lessons_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:20:37.717 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [CourseId] int NOT NULL,
    [Text] nvarchar(max) NULL,
    [AttachmentUrl] nvarchar(max) NULL,
    [SentAt] datetime2 NOT NULL,
    [ReplyToMessageId] int NULL,
    [IsSeen] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Messages_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Messages_ReplyToMessageId] FOREIGN KEY ([ReplyToMessageId]) REFERENCES [Messages] ([Id]),
    CONSTRAINT [FK_Messages_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:20:37.741 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [CourseId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [PaymentMethod] nvarchar(max) NULL,
    [IsSuccessful] bit NOT NULL,
    [PaidAt] datetime2 NOT NULL,
    [TransactionId] nvarchar(max) NULL,
    [CourseId1] int NULL,
    CONSTRAINT [PK_Payments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Payments_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Payments_Courses_CourseId1] FOREIGN KEY ([CourseId1]) REFERENCES [Courses] ([Id]),
    CONSTRAINT [FK_Payments_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 18:20:37.764 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Quizzes] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_Quizzes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Quizzes_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:20:37.789 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Reviews] (
    [Id] int NOT NULL IDENTITY,
    [CourseId] int NOT NULL,
    [UserId] int NOT NULL,
    [Rating] int NOT NULL,
    [Comment] nvarchar(max) NULL,
    CONSTRAINT [PK_Reviews] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Reviews_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Reviews_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 18:20:37.802 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Questions] (
    [Id] int NOT NULL IDENTITY,
    [Text] nvarchar(max) NULL,
    [QuizId] int NOT NULL,
    CONSTRAINT [PK_Questions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Questions_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:20:37.822 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [QuizResults] (
    [Id] int NOT NULL IDENTITY,
    [QuizId] int NOT NULL,
    [UserId] int NOT NULL,
    [TotalQuestions] int NOT NULL,
    [CorrectAnswers] int NOT NULL,
    [SubmittedAt] datetime2 NOT NULL,
    [QuizId1] int NULL,
    CONSTRAINT [PK_QuizResults] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_QuizResults_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_QuizResults_Quizzes_QuizId1] FOREIGN KEY ([QuizId1]) REFERENCES [Quizzes] ([Id]),
    CONSTRAINT [FK_QuizResults_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:20:37.836 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Choices] (
    [Id] int NOT NULL IDENTITY,
    [Text] nvarchar(max) NULL,
    [IsCorrect] bit NOT NULL,
    [QuestionId] int NOT NULL,
    CONSTRAINT [PK_Choices] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Choices_Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [Questions] ([Id]) ON DELETE CASCADE
);
2025-05-02 18:20:37.846 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Choices_QuestionId] ON [Choices] ([QuestionId]);
2025-05-02 18:20:37.859 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Courses_CategoryId] ON [Courses] ([CategoryId]);
2025-05-02 18:20:37.871 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Courses_InstructorId] ON [Courses] ([InstructorId]);
2025-05-02 18:20:37.879 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmailConfirmationCodes_Email] ON [EmailConfirmationCodes] ([Email]);
2025-05-02 18:20:37.893 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Enrollments_CourseId] ON [Enrollments] ([CourseId]);
2025-05-02 18:20:37.903 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Enrollments_UserId] ON [Enrollments] ([UserId]);
2025-05-02 18:20:37.914 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Lessons_CourseId] ON [Lessons] ([CourseId]);
2025-05-02 18:20:37.926 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_CourseId] ON [Messages] ([CourseId]);
2025-05-02 18:20:37.939 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_ReplyToMessageId] ON [Messages] ([ReplyToMessageId]);
2025-05-02 18:20:37.949 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_SenderId] ON [Messages] ([SenderId]);
2025-05-02 18:20:37.962 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_UserId] ON [Notifications] ([UserId]);
2025-05-02 18:20:37.978 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_Email] ON [PasswordResetCodes] ([Email]);
2025-05-02 18:20:38.003 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_CourseId] ON [Payments] ([CourseId]);
2025-05-02 18:20:38.011 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_CourseId1] ON [Payments] ([CourseId1]);
2025-05-02 18:20:38.025 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_UserId] ON [Payments] ([UserId]);
2025-05-02 18:20:38.040 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Profiles_UserId] ON [Profiles] ([UserId]);
2025-05-02 18:20:38.052 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Questions_QuizId] ON [Questions] ([QuizId]);
2025-05-02 18:20:38.061 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizResults_QuizId] ON [QuizResults] ([QuizId]);
2025-05-02 18:20:38.071 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizResults_QuizId1] ON [QuizResults] ([QuizId1]);
2025-05-02 18:20:38.080 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizResults_UserId] ON [QuizResults] ([UserId]);
2025-05-02 18:20:38.092 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quizzes_CourseId] ON [Quizzes] ([CourseId]);
2025-05-02 18:20:38.104 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reviews_CourseId] ON [Reviews] ([CourseId]);
2025-05-02 18:20:38.122 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reviews_UserId] ON [Reviews] ([UserId]);
2025-05-02 18:20:38.132 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_UserRefreshTokens_RefreshToken] ON [UserRefreshTokens] ([RefreshToken]);
2025-05-02 18:20:38.144 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRefreshTokens_UserId] ON [UserRefreshTokens] ([UserId]);
2025-05-02 18:20:38.177 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250502152004_UpadateNotifications', N'8.0.0');
2025-05-02 18:23:09.841 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 18:23:10.127 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:23:10.144 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:23:12.745 +03:00 [INF] Executed DbCommand (174ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:23:13.054 +03:00 [INF] Executed DbCommand (184ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:23:13.079 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:23:13.126 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:23:13.227 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 18:23:13.333 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 18:23:15.043 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 18:23:18.137 +03:00 [INF] Executed DbCommand (130ms) [Parameters=[@p0='2025-05-02T15:23:15.9868789Z', @p1='admin@elearning.com' (Size = 4000), @p2='مدير النظام' (Size = 4000), @p3='True', @p4='$2a$11$o8kvKUFvFlwWOnGmIEabWe/mVzjHIGsbpxvqbOgjGcZgPq0q7pYuq' (Size = 4000), @p5='Admin' (Nullable = false) (Size = 4000), @p6=NULL (DbType = DateTime2), @p7='2025-05-02T15:23:16.4598772Z', @p8='instructor@elearning.com' (Size = 4000), @p9='مدرس نموذجي' (Size = 4000), @p10='True', @p11='$2a$11$7IJndAYbH8JbxkOzO0zvq.P3ALjsvogPYFJ4WJl42mfyaLWdsxZBi' (Size = 4000), @p12='Instructor' (Nullable = false) (Size = 4000), @p13=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1)) AS i ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt])
VALUES (i.[CreatedAt], i.[Email], i.[FullName], i.[IsEmailConfirmed], i.[PasswordHash], i.[Role], i.[UpdatedAt])
OUTPUT INSERTED.[Id], i._Position;
2025-05-02 18:23:18.312 +03:00 [INF] Database updated successfully
2025-05-02 18:23:18.813 +03:00 [INF] Starting application...
2025-05-02 18:23:18.845 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 18:23:19.332 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 18:23:19.334 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 18:23:19.346 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 18:23:19.348 +03:00 [INF] Hosting environment: Development
2025-05-02 18:23:19.350 +03:00 [INF] Content root path: C:\Users\ta\OneDrive\Desktop\gpfirst
2025-05-02 18:23:20.340 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 18:23:20.544 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 207.7012ms
2025-05-02 18:23:20.582 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 18:23:20.781 +03:00 [INF] HTTP GET /swagger-ui/custom.css responded 404 in 177.0552 ms
2025-05-02 18:23:20.828 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 245.4819ms
2025-05-02 18:23:20.982 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 18:23:21.056 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 18:23:21.676 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 631.2661ms
2025-05-02 18:24:14.091 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/register - application/json 114
2025-05-02 18:24:14.108 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:24:14.111 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:24:14.152 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 18:24:14.242 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(e_learning.DTOs.UserRegisterDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:24:14.700 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__dto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 18:24:15.120 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='2025-05-02T15:24:15.0834231Z', @p1='abdomoka2018@gmail.com' (Size = 4000), @p2='Abdelrahman' (Size = 4000), @p3='False', @p4='$2a$11$JFwGKzKURoVYrRXyXOC.1.1GFQNVze6mjG7L/PPiKUoLx5VjMqmTy' (Size = 4000), @p5='Admin' (Nullable = false) (Size = 4000), @p6=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-02 18:24:15.218 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='436337' (Nullable = false) (Size = 6), @p1='2025-05-02T15:24:15.1424449Z', @p2='abdomoka2018@gmail.com' (Nullable = false) (Size = 450), @p3='2025-05-02T15:34:15.1426224Z'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [EmailConfirmationCodes] ([Code], [CreatedAt], [Email], [ExpiryDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-05-02 18:24:17.754 +03:00 [INF] تم إرسال البريد إلى abdomoka2018@gmail.com بنجاح
2025-05-02 18:24:17.756 +03:00 [INF] تم تسجيل مستخدم جديد - ID: 3
2025-05-02 18:24:17.769 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse`1[[e_learning.DTOs.Responses.RegisterResponse, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 18:24:17.807 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Register (e_learning) in 3548.3597ms
2025-05-02 18:24:17.810 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 18:24:17.814 +03:00 [INF] HTTP POST /api/Auth/register responded 200 in 3717.0005 ms
2025-05-02 18:24:17.831 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/register - 200 null application/json; charset=utf-8 3738.5247ms
2025-05-02 18:24:54.369 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/confirm-email - application/json 59
2025-05-02 18:24:54.417 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:24:54.422 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:24:54.434 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.ConfirmEmail (e_learning)'
2025-05-02 18:24:54.465 +03:00 [INF] Route matched with {action = "ConfirmEmail", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmEmail(e_learning.DTOs.ConfirmEmailDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:24:54.743 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__ToLower_0='abdomoka2018@gmail.com' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Code], [e].[CreatedAt], [e].[Email], [e].[ExpiryDate]
FROM [EmailConfirmationCodes] AS [e]
WHERE [e].[Email] = @__ToLower_0 AND [e].[ExpiryDate] > GETUTCDATE()
ORDER BY [e].[ExpiryDate] DESC
2025-05-02 18:24:54.824 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 18:24:54.885 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p1='3', @p0='True'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [IsEmailConfirmed] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-05-02 18:24:54.989 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__ToLower_0='abdomoka2018@gmail.com' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Code], [e].[CreatedAt], [e].[Email], [e].[ExpiryDate]
FROM [EmailConfirmationCodes] AS [e]
WHERE [e].[Email] = @__ToLower_0
2025-05-02 18:24:55.039 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='1'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [EmailConfirmationCodes]
OUTPUT 1
WHERE [Id] = @p0;
2025-05-02 18:24:55.075 +03:00 [INF] تم تأكيد البريد الإلكتروني لـ: abdomoka2018@gmail.com
2025-05-02 18:24:55.082 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 18:24:55.089 +03:00 [INF] Executed action e_learning.Controllers.AuthController.ConfirmEmail (e_learning) in 615.137ms
2025-05-02 18:24:55.097 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.ConfirmEmail (e_learning)'
2025-05-02 18:24:55.100 +03:00 [INF] HTTP POST /api/Auth/confirm-email responded 200 in 703.4747 ms
2025-05-02 18:24:55.105 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/confirm-email - 200 null application/json; charset=utf-8 736.2676ms
2025-05-02 18:25:20.659 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 62
2025-05-02 18:25:20.689 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:25:20.693 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:25:20.699 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:25:20.719 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:25:20.757 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-02 18:25:20.848 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 119.7607ms
2025-05-02 18:25:20.854 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:25:20.856 +03:00 [INF] HTTP POST /api/Auth/login responded 400 in 166.9257 ms
2025-05-02 18:25:20.860 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 400 null application/problem+json; charset=utf-8 200.8757ms
2025-05-02 18:26:06.587 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 62
2025-05-02 18:26:06.595 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:26:06.597 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:26:06.605 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:26:06.768 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:26:06.799 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-02 18:26:06.816 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 19.6674ms
2025-05-02 18:26:06.835 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:26:06.857 +03:00 [INF] HTTP POST /api/Auth/login responded 400 in 262.8590 ms
2025-05-02 18:26:06.864 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 400 null application/problem+json; charset=utf-8 276.9802ms
2025-05-02 18:27:21.437 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 66
2025-05-02 18:27:21.452 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:27:21.454 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:27:21.457 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:27:21.459 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:27:21.511 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 18:27:22.192 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[@p0='2025-05-02T15:27:21.9974514Z', @p1='2025-05-09T15:27:21.9973312Z', @p2='zTM2QmhPKSFk3gunDcCLPUWfdVenA7sqazTS3H59IY2IXbflJXn1KdMSMwDzPSsGikZElyA27DmAnqRG4RRDTw==' (Nullable = false) (Size = 450), @p3='3'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([CreatedAt], [ExpiryDate], [RefreshToken], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-05-02 18:27:22.223 +03:00 [INF] تم تسجيل دخول ناجح لـ: abdomoka2018@gmail.com
2025-05-02 18:27:22.226 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse`1[[e_learning.DTOs.Responses.LoginResponse, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 18:27:22.256 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 792.3594ms
2025-05-02 18:27:22.259 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:27:22.260 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 808.4537 ms
2025-05-02 18:27:22.267 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 200 null application/json; charset=utf-8 830.0684ms
2025-05-02 18:27:32.674 +03:00 [INF] Application is shutting down...
2025-05-02 18:28:00.055 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 18:28:00.273 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:28:00.288 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:28:01.346 +03:00 [INF] Executed DbCommand (71ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:28:01.455 +03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:28:01.473 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:28:01.508 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:28:01.607 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 18:28:01.674 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 18:28:02.363 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 18:28:02.426 +03:00 [INF] Database updated successfully
2025-05-02 18:28:02.764 +03:00 [INF] Starting application...
2025-05-02 18:28:02.789 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 18:28:03.047 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 18:28:03.052 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 18:28:03.058 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 18:28:03.062 +03:00 [INF] Hosting environment: Development
2025-05-02 18:28:03.065 +03:00 [INF] Content root path: C:\Users\ta\OneDrive\Desktop\gpfirst
2025-05-02 18:28:26.421 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 18:28:26.729 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 307.2906ms
2025-05-02 18:28:26.754 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 18:28:27.256 +03:00 [INF] HTTP GET /swagger-ui/custom.css responded 404 in 233.7844 ms
2025-05-02 18:28:27.265 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 511.2803ms
2025-05-02 18:28:27.303 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 18:28:27.782 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 18:28:28.480 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 698.2252ms
2025-05-02 18:29:01.717 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 66
2025-05-02 18:29:01.799 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:29:01.844 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:29:01.861 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:29:01.914 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:29:02.352 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 18:29:03.130 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='2025-05-02T15:29:02.7819236Z', @p1='2025-05-09T15:29:02.7817521Z', @p2='lVycERNHDDJbyr4iAGThOlBJBVE7wuH6KbDszBYzItAosJ0Vi1BfgFywSLiRIrp5R1M1SERuXJLPXmde9IyC2g==' (Nullable = false) (Size = 450), @p3='3'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([CreatedAt], [ExpiryDate], [RefreshToken], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-05-02 18:29:03.197 +03:00 [INF] تم تسجيل دخول ناجح لـ: abdomoka2018@gmail.com
2025-05-02 18:29:03.212 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse`1[[e_learning.DTOs.Responses.LoginResponse, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 18:29:03.263 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 1342.0236ms
2025-05-02 18:29:03.267 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:29:03.270 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 1500.8984 ms
2025-05-02 18:29:03.285 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 200 null application/json; charset=utf-8 1568.7247ms
2025-05-02 18:32:16.496 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Profile - application/json 140
2025-05-02 18:32:16.541 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:32:16.543 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:32:16.562 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-02 18:32:16.568 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-02 18:32:16.569 +03:00 [INF] HTTP POST /api/Profile responded 401 in 69.6436 ms
2025-05-02 18:32:16.571 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Profile - 401 0 null 74.7711ms
2025-05-02 18:33:18.552 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Profile - application/json 140
2025-05-02 18:33:18.555 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:33:18.557 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:33:18.615 +03:00 [INF] Executing endpoint 'e_learning.Controllers.ProfileController.CreateProfile (e_learning)'
2025-05-02 18:33:18.625 +03:00 [INF] Route matched with {action = "CreateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProfile(CreateProfileDto) on controller e_learning.Controllers.ProfileController (e_learning).
2025-05-02 18:33:18.673 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Profiles] AS [p]
        WHERE [p].[UserId] = @__userId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 18:33:18.739 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='Helwan' (Size = 4000), @p1='Software Engineer' (Size = 4000), @p2='2025-05-02T15:33:18.6815066Z', @p3='01145064366' (Size = 4000), @p4='string' (Size = 4000), @p5='2025-05-02T15:33:18.6815614Z', @p6='3'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Profiles] ([Address], [Bio], [CreatedAt], [Phone], [ProfilePicture], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-02 18:33:18.754 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-05-02 18:33:18.758 +03:00 [INF] Executed action e_learning.Controllers.ProfileController.CreateProfile (e_learning) in 130.4809ms
2025-05-02 18:33:18.761 +03:00 [INF] Executed endpoint 'e_learning.Controllers.ProfileController.CreateProfile (e_learning)'
2025-05-02 18:33:18.763 +03:00 [INF] HTTP POST /api/Profile responded 200 in 207.4440 ms
2025-05-02 18:33:18.772 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Profile - 200 null text/plain; charset=utf-8 219.3413ms
2025-05-02 18:37:51.204 +03:00 [INF] Application is shutting down...
2025-05-02 18:38:46.089 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 18:38:46.199 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:38:46.208 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:38:47.113 +03:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:38:47.239 +03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:38:47.252 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:38:47.263 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:38:47.307 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 18:38:47.348 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 18:38:47.844 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 18:38:47.887 +03:00 [INF] Database updated successfully
2025-05-02 18:38:48.121 +03:00 [INF] Starting application...
2025-05-02 18:38:48.139 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 18:38:48.365 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 18:38:48.367 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 18:38:48.372 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 18:38:48.374 +03:00 [INF] Hosting environment: Development
2025-05-02 18:38:48.375 +03:00 [INF] Content root path: C:\Users\ta\OneDrive\Desktop\gpfirst
2025-05-02 18:38:52.767 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 18:38:52.931 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 165.979ms
2025-05-02 18:38:52.959 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 18:38:53.229 +03:00 [INF] HTTP GET /swagger-ui/custom.css responded 404 in 239.8313 ms
2025-05-02 18:38:53.235 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 275.929ms
2025-05-02 18:38:53.268 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 18:38:54.087 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 18:38:54.417 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 330.5761ms
2025-05-02 18:39:01.742 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 66
2025-05-02 18:39:01.752 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:39:01.758 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:39:01.780 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:39:01.825 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:39:02.160 +03:00 [INF] Executed DbCommand (53ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 18:39:02.910 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='2025-05-02T15:39:02.5966548Z', @p1='2025-05-09T15:39:02.5965703Z', @p2='idcafpDZlcIzHsybBN19lVtAkfzJTk8p4DifiaOyC6cke+05b41ta8twpnzPUMKm4ec9zmb3Wsa78U9gZiueRg==' (Nullable = false) (Size = 450), @p3='3'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([CreatedAt], [ExpiryDate], [RefreshToken], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-05-02 18:39:03.039 +03:00 [INF] تم تسجيل دخول ناجح لـ: abdomoka2018@gmail.com
2025-05-02 18:39:03.061 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse`1[[e_learning.DTOs.Responses.LoginResponse, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 18:39:03.119 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 1284.1186ms
2025-05-02 18:39:03.123 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:39:03.126 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 1380.8449 ms
2025-05-02 18:39:03.139 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 200 null application/json; charset=utf-8 1396.7309ms
2025-05-02 18:39:46.975 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/api/Profile/me - null null
2025-05-02 18:39:47.039 +03:00 [INF] Executing endpoint 'e_learning.Controllers.ProfileController.GetMyProfile (e_learning)'
2025-05-02 18:39:47.048 +03:00 [INF] Route matched with {action = "GetMyProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyProfile() on controller e_learning.Controllers.ProfileController (e_learning).
2025-05-02 18:39:47.193 +03:00 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Bio], [p].[CreatedAt], [p].[Phone], [p].[ProfilePicture], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Profiles] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
WHERE [p].[UserId] = @__userId_0
2025-05-02 18:39:47.291 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.ProfileResponseDto'.
2025-05-02 18:39:47.296 +03:00 [INF] Executed action e_learning.Controllers.ProfileController.GetMyProfile (e_learning) in 240.2594ms
2025-05-02 18:39:47.299 +03:00 [INF] Executed endpoint 'e_learning.Controllers.ProfileController.GetMyProfile (e_learning)'
2025-05-02 18:39:47.303 +03:00 [INF] HTTP GET /api/Profile/me responded 200 in 325.4212 ms
2025-05-02 18:39:47.311 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/api/Profile/me - 200 null application/json; charset=utf-8 335.5204ms
2025-05-02 18:40:23.845 +03:00 [INF] Request starting HTTP/2 PATCH https://localhost:7056/api/Profile - application/json 146
2025-05-02 18:40:23.849 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:40:23.851 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:40:23.855 +03:00 [INF] Executing endpoint 'e_learning.Controllers.ProfileController.UpdateProfile (e_learning)'
2025-05-02 18:40:23.865 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(e_learning.DTOs.UpdateProfileDto) on controller e_learning.Controllers.ProfileController (e_learning).
2025-05-02 18:40:23.894 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Bio], [p].[CreatedAt], [p].[Phone], [p].[ProfilePicture], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Profiles] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
WHERE [p].[UserId] = @__userId_0
2025-05-02 18:40:23.971 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p4='1', @p0='string' (Size = 4000), @p1='string' (Size = 4000), @p2='string' (Size = 4000), @p3='2025-05-02T15:40:23.9042006Z', @p7='3', @p5='string' (Size = 4000), @p6='Abdelrahmaan' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Profiles] SET [Address] = @p0, [Bio] = @p1, [Phone] = @p2, [UpdatedAt] = @p3
OUTPUT 1
WHERE [Id] = @p4;
UPDATE [Users] SET [Email] = @p5, [FullName] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2025-05-02 18:40:23.999 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Bio], [p].[CreatedAt], [p].[Phone], [p].[ProfilePicture], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Profiles] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
WHERE [p].[UserId] = @__userId_0
2025-05-02 18:40:24.007 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[e_learning.Models.Profile, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 18:40:24.050 +03:00 [INF] Executed action e_learning.Controllers.ProfileController.UpdateProfile (e_learning) in 179.6582ms
2025-05-02 18:40:24.053 +03:00 [INF] Executed endpoint 'e_learning.Controllers.ProfileController.UpdateProfile (e_learning)'
2025-05-02 18:40:24.055 +03:00 [INF] HTTP PATCH /api/Profile responded 200 in 205.6746 ms
2025-05-02 18:40:24.058 +03:00 [INF] Request finished HTTP/2 PATCH https://localhost:7056/api/Profile - 200 null application/json; charset=utf-8 213.3698ms
2025-05-02 18:40:36.284 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/api/Profile/me - null null
2025-05-02 18:40:36.290 +03:00 [INF] Executing endpoint 'e_learning.Controllers.ProfileController.GetMyProfile (e_learning)'
2025-05-02 18:40:36.293 +03:00 [INF] Route matched with {action = "GetMyProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyProfile() on controller e_learning.Controllers.ProfileController (e_learning).
2025-05-02 18:40:36.338 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Bio], [p].[CreatedAt], [p].[Phone], [p].[ProfilePicture], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Profiles] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
WHERE [p].[UserId] = @__userId_0
2025-05-02 18:40:36.350 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.ProfileResponseDto'.
2025-05-02 18:40:36.353 +03:00 [INF] Executed action e_learning.Controllers.ProfileController.GetMyProfile (e_learning) in 56.6141ms
2025-05-02 18:40:36.355 +03:00 [INF] Executed endpoint 'e_learning.Controllers.ProfileController.GetMyProfile (e_learning)'
2025-05-02 18:40:36.360 +03:00 [INF] HTTP GET /api/Profile/me responded 200 in 73.2232 ms
2025-05-02 18:40:36.367 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/api/Profile/me - 200 null application/json; charset=utf-8 83.288ms
2025-05-02 18:43:54.982 +03:00 [INF] Request starting HTTP/2 PATCH https://localhost:7056/api/Profile - application/json 50
2025-05-02 18:43:54.986 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:43:54.987 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:43:54.989 +03:00 [INF] Executing endpoint 'e_learning.Controllers.ProfileController.UpdateProfile (e_learning)'
2025-05-02 18:43:54.990 +03:00 [INF] Route matched with {action = "UpdateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateProfile(e_learning.DTOs.UpdateProfileDto) on controller e_learning.Controllers.ProfileController (e_learning).
2025-05-02 18:43:55.034 +03:00 [INF] Executed DbCommand (30ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Bio], [p].[CreatedAt], [p].[Phone], [p].[ProfilePicture], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Profiles] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
WHERE [p].[UserId] = @__userId_0
2025-05-02 18:43:55.061 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[@p2='1', @p0='Back-end developer and mentor 💻' (Size = 4000), @p1='2025-05-02T15:43:55.0424832Z'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Profiles] SET [Bio] = @p0, [UpdatedAt] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-05-02 18:43:55.073 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Bio], [p].[CreatedAt], [p].[Phone], [p].[ProfilePicture], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Profiles] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
WHERE [p].[UserId] = @__userId_0
2025-05-02 18:43:55.083 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType15`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[e_learning.Models.Profile, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 18:43:55.089 +03:00 [INF] Executed action e_learning.Controllers.ProfileController.UpdateProfile (e_learning) in 93.3151ms
2025-05-02 18:43:55.092 +03:00 [INF] Executed endpoint 'e_learning.Controllers.ProfileController.UpdateProfile (e_learning)'
2025-05-02 18:43:55.096 +03:00 [INF] HTTP PATCH /api/Profile responded 200 in 110.2385 ms
2025-05-02 18:43:55.102 +03:00 [INF] Request finished HTTP/2 PATCH https://localhost:7056/api/Profile - 200 null application/json; charset=utf-8 120.7497ms
2025-05-02 18:51:25.816 +03:00 [INF] Application is shutting down...
2025-05-02 18:51:52.430 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 18:51:52.584 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:51:52.607 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 18:51:53.758 +03:00 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:51:53.873 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:51:53.901 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 18:51:54.081 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 18:51:54.133 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 18:51:54.214 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 18:51:54.842 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 18:51:54.915 +03:00 [INF] Database updated successfully
2025-05-02 18:51:55.356 +03:00 [INF] Starting application...
2025-05-02 18:51:55.398 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 18:51:55.691 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 18:51:55.712 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 18:51:55.717 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 18:51:55.722 +03:00 [INF] Hosting environment: Development
2025-05-02 18:51:55.726 +03:00 [INF] Content root path: C:\Users\ta\OneDrive\Desktop\gpfirst
2025-05-02 18:52:34.674 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 18:52:34.809 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 138.396ms
2025-05-02 18:52:34.855 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 18:52:35.029 +03:00 [INF] HTTP GET /swagger-ui/custom.css responded 404 in 162.1603 ms
2025-05-02 18:52:35.039 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 182.7688ms
2025-05-02 18:52:35.047 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 18:52:35.394 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 18:52:35.759 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 364.6044ms
2025-05-02 18:52:43.519 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/api/Profile/me - null null
2025-05-02 18:52:43.542 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-05-02 18:52:43.548 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-05-02 18:52:43.549 +03:00 [INF] HTTP GET /api/Profile/me responded 401 in 26.9799 ms
2025-05-02 18:52:43.554 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/api/Profile/me - 401 0 null 34.6176ms
2025-05-02 18:53:15.532 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 66
2025-05-02 18:53:15.539 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:53:15.542 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:53:15.560 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:53:15.607 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:53:15.947 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 18:53:15.959 +03:00 [WRN] محاولة دخول فاشلة للبريد: abdomoka2018@gmail.com
2025-05-02 18:53:15.974 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 18:53:16.011 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 396.2139ms
2025-05-02 18:53:16.018 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:53:16.021 +03:00 [INF] HTTP POST /api/Auth/login responded 401 in 486.0709 ms
2025-05-02 18:53:16.031 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 401 null application/json; charset=utf-8 499.271ms
2025-05-02 18:53:29.709 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 18:53:29.722 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 13.5524ms
2025-05-02 18:53:29.737 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 18:53:29.745 +03:00 [INF] HTTP GET /swagger-ui/custom.css responded 404 in 1.4472 ms
2025-05-02 18:53:29.747 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 9.5425ms
2025-05-02 18:53:29.753 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 18:53:29.922 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 18:53:30.032 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.1763ms
2025-05-02 18:54:12.560 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 66
2025-05-02 18:54:12.566 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:54:12.567 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:54:12.569 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:54:12.572 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:54:12.623 +03:00 [INF] Executed DbCommand (22ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 18:54:12.685 +03:00 [WRN] محاولة دخول فاشلة للبريد: abdomoka2018@gmail.com
2025-05-02 18:54:12.689 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 18:54:12.708 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 128.0006ms
2025-05-02 18:54:12.737 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:54:12.744 +03:00 [INF] HTTP POST /api/Auth/login responded 401 in 181.1268 ms
2025-05-02 18:54:12.777 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 401 null application/json; charset=utf-8 216.9713ms
2025-05-02 18:56:00.060 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 114
2025-05-02 18:56:00.072 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:56:00.122 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:56:00.124 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:56:00.126 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:56:00.147 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='admin@elearning.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 18:56:00.563 +03:00 [WRN] محاولة دخول فاشلة للبريد: admin@elearning.com
2025-05-02 18:56:00.566 +03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 18:56:00.569 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 440.7513ms
2025-05-02 18:56:00.574 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:56:00.575 +03:00 [INF] HTTP POST /api/Auth/login responded 401 in 502.9166 ms
2025-05-02 18:56:00.687 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 401 null application/json; charset=utf-8 626.5784ms
2025-05-02 18:57:07.978 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 63
2025-05-02 18:57:07.981 +03:00 [INF] CORS policy execution failed.
2025-05-02 18:57:07.982 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 18:57:07.985 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:57:07.986 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 18:57:08.041 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_Email_0='admin@elearning.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 18:57:08.686 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[@p0='2025-05-02T15:57:08.3715710Z', @p1='2025-05-09T15:57:08.3714868Z', @p2='Q8pGip2dpkqmwXebLSVV2+E15fvO64vOmr9ICQF/lMnR7lsbYzqCTYGol9e2Upl0xM/WjA8pVNfYN6PfUOuCDA==' (Nullable = false) (Size = 450), @p3='1'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([CreatedAt], [ExpiryDate], [RefreshToken], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-05-02 18:57:08.780 +03:00 [INF] تم تسجيل دخول ناجح لـ: admin@elearning.com
2025-05-02 18:57:08.786 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse`1[[e_learning.DTOs.Responses.LoginResponse, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 18:57:08.815 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 826.741ms
2025-05-02 18:57:08.817 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 18:57:08.818 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 836.9511 ms
2025-05-02 18:57:08.822 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 200 null application/json; charset=utf-8 844.4051ms
2025-05-02 18:59:51.898 +03:00 [INF] Application is shutting down...
2025-05-02 19:02:05.900 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 19:02:06.026 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:02:06.037 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:02:06.595 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 19:02:09.797 +03:00 [INF] Executed DbCommand (3,137ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [E_LearningDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
END;
2025-05-02 19:02:10.230 +03:00 [INF] Executed DbCommand (422ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
DROP DATABASE [E_LearningDB];
2025-05-02 19:02:38.236 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 19:02:38.384 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:02:38.394 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:02:38.740 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:02:38.744 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:02:57.836 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 19:02:58.057 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:02:58.257 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:02:59.668 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:02:59.670 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:03:01.196 +03:00 [INF] Executed DbCommand (1,381ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [E_LearningDB];
2025-05-02 19:03:01.319 +03:00 [INF] Executed DbCommand (110ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [E_LearningDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-05-02 19:03:01.362 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 19:03:01.506 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2025-05-02 19:03:01.515 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 19:03:01.546 +03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 19:03:01.583 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 19:03:01.622 +03:00 [INF] Applying migration '20250502160239_UpadateNotifications'.
2025-05-02 19:03:01.918 +03:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Categories] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Categories] PRIMARY KEY ([Id])
);
2025-05-02 19:03:01.930 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [EmailConfirmationCodes] (
    [Id] int NOT NULL IDENTITY,
    [Email] nvarchar(450) NOT NULL,
    [Code] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETDATE()),
    CONSTRAINT [PK_EmailConfirmationCodes] PRIMARY KEY ([Id])
);
2025-05-02 19:03:01.940 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [PasswordResetCodes] (
    [Id] int NOT NULL IDENTITY,
    [Email] nvarchar(450) NOT NULL,
    [Code] nvarchar(6) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETDATE()),
    CONSTRAINT [PK_PasswordResetCodes] PRIMARY KEY ([Id])
);
2025-05-02 19:03:01.951 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(max) NULL,
    [Email] nvarchar(max) NULL,
    [PasswordHash] nvarchar(max) NULL,
    [Role] nvarchar(max) NOT NULL,
    [IsEmailConfirmed] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-05-02 19:03:01.964 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Courses] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [Title] nvarchar(max) NULL,
    [Description] nvarchar(max) NULL,
    [Price] decimal(18,2) NOT NULL,
    [ImageUrl] nvarchar(max) NULL,
    [IsActive] bit NULL,
    [CategoryId] int NOT NULL,
    [InstructorId] int NOT NULL,
    CONSTRAINT [PK_Courses] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Courses_Categories_CategoryId] FOREIGN KEY ([CategoryId]) REFERENCES [Categories] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Courses_Users_InstructorId] FOREIGN KEY ([InstructorId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 19:03:01.976 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Notifications] (
    [Id] uniqueidentifier NOT NULL,
    [Title] nvarchar(100) NOT NULL,
    [Message] nvarchar(max) NOT NULL,
    [UserId] int NOT NULL,
    [SenderId] nvarchar(max) NULL,
    [IsRead] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    [NotificationType] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_Notifications] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Notifications_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 19:03:01.988 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Profiles] (
    [Id] int NOT NULL IDENTITY,
    [Bio] nvarchar(max) NULL,
    [ProfilePicture] nvarchar(max) NULL,
    [Address] nvarchar(max) NULL,
    [Phone] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NOT NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_Profiles] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Profiles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 19:03:01.998 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UserRefreshTokens] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [RefreshToken] nvarchar(450) NOT NULL,
    [ExpiryDate] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL DEFAULT (GETDATE()),
    CONSTRAINT [PK_UserRefreshTokens] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserRefreshTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 19:03:02.006 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Enrollments] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_Enrollments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Enrollments_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Enrollments_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 19:03:02.014 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Lessons] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NULL,
    [VideoUrl] nvarchar(max) NULL,
    [AttachmentUrl] nvarchar(max) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_Lessons] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Lessons_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE
);
2025-05-02 19:03:02.023 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Messages] (
    [Id] int NOT NULL IDENTITY,
    [SenderId] int NOT NULL,
    [CourseId] int NOT NULL,
    [Text] nvarchar(max) NULL,
    [AttachmentUrl] nvarchar(max) NULL,
    [SentAt] datetime2 NOT NULL,
    [ReplyToMessageId] int NULL,
    [IsSeen] bit NOT NULL,
    CONSTRAINT [PK_Messages] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Messages_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Messages_Messages_ReplyToMessageId] FOREIGN KEY ([ReplyToMessageId]) REFERENCES [Messages] ([Id]),
    CONSTRAINT [FK_Messages_Users_SenderId] FOREIGN KEY ([SenderId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 19:03:02.033 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Payments] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [CourseId] int NOT NULL,
    [Amount] decimal(18,2) NOT NULL,
    [PaymentMethod] nvarchar(max) NULL,
    [IsSuccessful] bit NOT NULL,
    [PaidAt] datetime2 NOT NULL,
    [TransactionId] nvarchar(max) NULL,
    [CourseId1] int NULL,
    CONSTRAINT [PK_Payments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Payments_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Payments_Courses_CourseId1] FOREIGN KEY ([CourseId1]) REFERENCES [Courses] ([Id]),
    CONSTRAINT [FK_Payments_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 19:03:02.040 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Quizzes] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NULL,
    [CourseId] int NOT NULL,
    CONSTRAINT [PK_Quizzes] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Quizzes_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE CASCADE
);
2025-05-02 19:03:02.052 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Reviews] (
    [Id] int NOT NULL IDENTITY,
    [CourseId] int NOT NULL,
    [UserId] int NOT NULL,
    [Rating] int NOT NULL,
    [Comment] nvarchar(max) NULL,
    CONSTRAINT [PK_Reviews] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Reviews_Courses_CourseId] FOREIGN KEY ([CourseId]) REFERENCES [Courses] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Reviews_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2025-05-02 19:03:02.063 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Questions] (
    [Id] int NOT NULL IDENTITY,
    [Text] nvarchar(max) NULL,
    [QuizId] int NOT NULL,
    CONSTRAINT [PK_Questions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Questions_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE
);
2025-05-02 19:03:02.073 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [QuizResults] (
    [Id] int NOT NULL IDENTITY,
    [QuizId] int NOT NULL,
    [UserId] int NOT NULL,
    [TotalQuestions] int NOT NULL,
    [CorrectAnswers] int NOT NULL,
    [SubmittedAt] datetime2 NOT NULL,
    [QuizId1] int NULL,
    CONSTRAINT [PK_QuizResults] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_QuizResults_Quizzes_QuizId] FOREIGN KEY ([QuizId]) REFERENCES [Quizzes] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_QuizResults_Quizzes_QuizId1] FOREIGN KEY ([QuizId1]) REFERENCES [Quizzes] ([Id]),
    CONSTRAINT [FK_QuizResults_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2025-05-02 19:03:02.085 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Choices] (
    [Id] int NOT NULL IDENTITY,
    [Text] nvarchar(max) NULL,
    [IsCorrect] bit NOT NULL,
    [QuestionId] int NOT NULL,
    CONSTRAINT [PK_Choices] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Choices_Questions_QuestionId] FOREIGN KEY ([QuestionId]) REFERENCES [Questions] ([Id]) ON DELETE CASCADE
);
2025-05-02 19:03:02.101 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Choices_QuestionId] ON [Choices] ([QuestionId]);
2025-05-02 19:03:02.109 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Courses_CategoryId] ON [Courses] ([CategoryId]);
2025-05-02 19:03:02.116 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Courses_InstructorId] ON [Courses] ([InstructorId]);
2025-05-02 19:03:02.125 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_EmailConfirmationCodes_Email] ON [EmailConfirmationCodes] ([Email]);
2025-05-02 19:03:02.132 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Enrollments_CourseId] ON [Enrollments] ([CourseId]);
2025-05-02 19:03:02.137 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Enrollments_UserId] ON [Enrollments] ([UserId]);
2025-05-02 19:03:02.142 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Lessons_CourseId] ON [Lessons] ([CourseId]);
2025-05-02 19:03:02.150 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_CourseId] ON [Messages] ([CourseId]);
2025-05-02 19:03:02.160 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_ReplyToMessageId] ON [Messages] ([ReplyToMessageId]);
2025-05-02 19:03:02.167 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Messages_SenderId] ON [Messages] ([SenderId]);
2025-05-02 19:03:02.175 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Notifications_UserId] ON [Notifications] ([UserId]);
2025-05-02 19:03:02.183 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_PasswordResetCodes_Email] ON [PasswordResetCodes] ([Email]);
2025-05-02 19:03:02.188 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_CourseId] ON [Payments] ([CourseId]);
2025-05-02 19:03:02.192 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_CourseId1] ON [Payments] ([CourseId1]);
2025-05-02 19:03:02.200 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Payments_UserId] ON [Payments] ([UserId]);
2025-05-02 19:03:02.205 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Profiles_UserId] ON [Profiles] ([UserId]);
2025-05-02 19:03:02.210 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Questions_QuizId] ON [Questions] ([QuizId]);
2025-05-02 19:03:02.219 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizResults_QuizId] ON [QuizResults] ([QuizId]);
2025-05-02 19:03:02.225 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizResults_QuizId1] ON [QuizResults] ([QuizId1]);
2025-05-02 19:03:02.235 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_QuizResults_UserId] ON [QuizResults] ([UserId]);
2025-05-02 19:03:02.242 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Quizzes_CourseId] ON [Quizzes] ([CourseId]);
2025-05-02 19:03:02.249 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reviews_CourseId] ON [Reviews] ([CourseId]);
2025-05-02 19:03:02.255 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Reviews_UserId] ON [Reviews] ([UserId]);
2025-05-02 19:03:02.261 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_UserRefreshTokens_RefreshToken] ON [UserRefreshTokens] ([RefreshToken]);
2025-05-02 19:03:02.266 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRefreshTokens_UserId] ON [UserRefreshTokens] ([UserId]);
2025-05-02 19:03:02.281 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250502160239_UpadateNotifications', N'8.0.0');
2025-05-02 19:05:40.784 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 19:05:40.858 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:05:40.870 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:05:41.251 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 19:05:41.288 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 19:05:41.301 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 19:05:41.310 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 19:05:41.334 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 19:05:41.355 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 19:06:10.679 +03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-05-02 19:06:10.812 +03:00 [WRN] The foreign key property 'Payment.CourseId1' was created in shadow state because a conflicting property with the simple name 'CourseId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:06:10.827 +03:00 [WRN] The foreign key property 'QuizResult.QuizId1' was created in shadow state because a conflicting property with the simple name 'QuizId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2025-05-02 19:06:11.815 +03:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 19:06:12.006 +03:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 19:06:12.019 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-05-02 19:06:12.034 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-05-02 19:06:12.077 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-05-02 19:06:12.135 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-05-02 19:06:12.767 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 19:06:14.124 +03:00 [INF] Executed DbCommand (68ms) [Parameters=[@p0='2025-05-02T16:06:13.2753038Z', @p1='admin@elearning.com' (Size = 4000), @p2='مدير النظام' (Size = 4000), @p3='True', @p4='$2a$11$wnBYm5rkH22wAXDBhlOqsebLNXzHOZPSAyNVAg18cIXliSG1xdf8y' (Size = 4000), @p5='Admin' (Nullable = false) (Size = 4000), @p6=NULL (DbType = DateTime2), @p7='2025-05-02T16:06:13.5894949Z', @p8='instructor@elearning.com' (Size = 4000), @p9='مدرس نموذجي' (Size = 4000), @p10='True', @p11='$2a$11$ZQdFD.WDU0N0eSu/0kan3O9G28dvlGqubkthk9JFY.rm4L3nObyfC' (Size = 4000), @p12='Instructor' (Nullable = false) (Size = 4000), @p13=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Users] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, @p12, @p13, 1)) AS i ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt])
VALUES (i.[CreatedAt], i.[Email], i.[FullName], i.[IsEmailConfirmed], i.[PasswordHash], i.[Role], i.[UpdatedAt])
OUTPUT INSERTED.[Id], i._Position;
2025-05-02 19:06:14.194 +03:00 [INF] Database updated successfully
2025-05-02 19:06:14.565 +03:00 [INF] Starting application...
2025-05-02 19:06:14.742 +03:00 [INF] User profile is available. Using 'C:\Users\ta\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-05-02 19:06:15.307 +03:00 [INF] Now listening on: https://localhost:7056
2025-05-02 19:06:15.312 +03:00 [INF] Now listening on: http://localhost:5000
2025-05-02 19:06:15.319 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-05-02 19:06:15.321 +03:00 [INF] Hosting environment: Development
2025-05-02 19:06:15.322 +03:00 [INF] Content root path: C:\Users\ta\OneDrive\Desktop\gpfirst
2025-05-02 19:06:45.786 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/index.html - null null
2025-05-02 19:06:46.011 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/index.html - 200 null text/html;charset=utf-8 227.0782ms
2025-05-02 19:06:46.061 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - null null
2025-05-02 19:06:46.194 +03:00 [INF] HTTP GET /swagger-ui/custom.css responded 404 in 105.8486 ms
2025-05-02 19:06:46.198 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger-ui/custom.css - 404 0 null 136.688ms
2025-05-02 19:06:46.204 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7056/swagger-ui/custom.css, Response status code: 404
2025-05-02 19:06:47.031 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - null null
2025-05-02 19:06:47.449 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 418.3995ms
2025-05-02 19:07:36.668 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/register - application/json 114
2025-05-02 19:07:36.700 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:07:36.702 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:07:36.718 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 19:07:36.755 +03:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(e_learning.DTOs.UserRegisterDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 19:07:37.001 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Email] = @__dto_Email_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 19:07:37.269 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='2025-05-02T16:07:37.2554941Z', @p1='abdomoka2018@gmail.com' (Size = 4000), @p2='Abdelrahman' (Size = 4000), @p3='False', @p4='$2a$11$oN.nLn4/e1I5xwQ/3Xd92OitiOIDCcFosoyPIDkXrsaBwbOWIjFGK' (Size = 4000), @p5='Admin' (Nullable = false) (Size = 4000), @p6=NULL (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [Email], [FullName], [IsEmailConfirmed], [PasswordHash], [Role], [UpdatedAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-02 19:07:37.302 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='694225' (Nullable = false) (Size = 6), @p1='2025-05-02T16:07:37.2776638Z', @p2='abdomoka2018@gmail.com' (Nullable = false) (Size = 450), @p3='2025-05-02T16:17:37.2777267Z'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [EmailConfirmationCodes] ([Code], [CreatedAt], [Email], [ExpiryDate])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-05-02 19:07:39.577 +03:00 [INF] تم إرسال البريد إلى abdomoka2018@gmail.com بنجاح
2025-05-02 19:07:39.579 +03:00 [INF] تم تسجيل مستخدم جديد - ID: 3
2025-05-02 19:07:39.598 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse`1[[e_learning.DTOs.Responses.RegisterResponse, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:07:39.641 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Register (e_learning) in 2874.7916ms
2025-05-02 19:07:39.643 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Register (e_learning)'
2025-05-02 19:07:39.647 +03:00 [INF] HTTP POST /api/Auth/register responded 200 in 2953.0706 ms
2025-05-02 19:07:39.666 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/register - 200 null application/json; charset=utf-8 2997.5393ms
2025-05-02 19:07:57.838 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/confirm-email - application/json 59
2025-05-02 19:07:57.848 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:07:57.849 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:07:57.859 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.ConfirmEmail (e_learning)'
2025-05-02 19:07:57.875 +03:00 [INF] Route matched with {action = "ConfirmEmail", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmEmail(e_learning.DTOs.ConfirmEmailDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 19:07:58.035 +03:00 [INF] Executed DbCommand (48ms) [Parameters=[@__ToLower_0='abdomoka2018@gmail.com' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Code], [e].[CreatedAt], [e].[Email], [e].[ExpiryDate]
FROM [EmailConfirmationCodes] AS [e]
WHERE [e].[Email] = @__ToLower_0 AND [e].[ExpiryDate] > GETUTCDATE()
ORDER BY [e].[ExpiryDate] DESC
2025-05-02 19:07:58.097 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 19:07:58.215 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[@p1='3', @p0='True'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [IsEmailConfirmed] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-05-02 19:07:58.284 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='abdomoka2018@gmail.com' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[Code], [e].[CreatedAt], [e].[Email], [e].[ExpiryDate]
FROM [EmailConfirmationCodes] AS [e]
WHERE [e].[Email] = @__ToLower_0
2025-05-02 19:07:58.317 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='1'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [EmailConfirmationCodes]
OUTPUT 1
WHERE [Id] = @p0;
2025-05-02 19:07:58.334 +03:00 [INF] تم تأكيد البريد الإلكتروني لـ: abdomoka2018@gmail.com
2025-05-02 19:07:58.339 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 19:07:58.343 +03:00 [INF] Executed action e_learning.Controllers.AuthController.ConfirmEmail (e_learning) in 460.8282ms
2025-05-02 19:07:58.346 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.ConfirmEmail (e_learning)'
2025-05-02 19:07:58.348 +03:00 [INF] HTTP POST /api/Auth/confirm-email responded 200 in 506.2457 ms
2025-05-02 19:07:58.364 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/confirm-email - 200 null application/json; charset=utf-8 525.8095ms
2025-05-02 19:08:22.005 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/confirm-email - application/json 59
2025-05-02 19:08:22.009 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:08:22.010 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:08:22.012 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.ConfirmEmail (e_learning)'
2025-05-02 19:08:22.014 +03:00 [INF] Route matched with {action = "ConfirmEmail", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmEmail(e_learning.DTOs.ConfirmEmailDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 19:08:22.094 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='abdomoka2018@gmail.com' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[Code], [e].[CreatedAt], [e].[Email], [e].[ExpiryDate]
FROM [EmailConfirmationCodes] AS [e]
WHERE [e].[Email] = @__ToLower_0 AND [e].[ExpiryDate] > GETUTCDATE()
ORDER BY [e].[ExpiryDate] DESC
2025-05-02 19:08:22.104 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse'.
2025-05-02 19:08:22.106 +03:00 [INF] Executed action e_learning.Controllers.AuthController.ConfirmEmail (e_learning) in 47.4583ms
2025-05-02 19:08:22.108 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.ConfirmEmail (e_learning)'
2025-05-02 19:08:22.110 +03:00 [INF] HTTP POST /api/Auth/confirm-email responded 400 in 101.2895 ms
2025-05-02 19:08:22.113 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/confirm-email - 400 null application/json; charset=utf-8 107.6597ms
2025-05-02 19:08:44.650 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Auth/login - application/json 66
2025-05-02 19:08:44.657 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:08:44.660 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:08:44.707 +03:00 [INF] Executing endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 19:08:44.713 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(e_learning.DTOs.UserLoginDto) on controller e_learning.Controllers.AuthController (e_learning).
2025-05-02 19:08:44.754 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_Email_0='abdomoka2018@gmail.com' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] = @__dto_Email_0
2025-05-02 19:08:45.088 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='2025-05-02T16:08:45.0365567Z', @p1='2025-05-09T16:08:45.0364733Z', @p2='70wjv8EZ1unA5TNz70QbtRK1Dgs33PkSv728t+PXzKnJeI8mUEbNB+I6xJ3MsANs4YG2MRZNM7cnRsuq+VeVjg==' (Nullable = false) (Size = 450), @p3='3'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserRefreshTokens] ([CreatedAt], [ExpiryDate], [RefreshToken], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-05-02 19:08:45.108 +03:00 [INF] تم تسجيل دخول ناجح لـ: abdomoka2018@gmail.com
2025-05-02 19:08:45.111 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.Responses.ApiResponse`1[[e_learning.DTOs.Responses.LoginResponse, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:08:45.128 +03:00 [INF] Executed action e_learning.Controllers.AuthController.Login (e_learning) in 406.2593ms
2025-05-02 19:08:45.129 +03:00 [INF] Executed endpoint 'e_learning.Controllers.AuthController.Login (e_learning)'
2025-05-02 19:08:45.131 +03:00 [INF] HTTP POST /api/Auth/login responded 200 in 473.7915 ms
2025-05-02 19:08:45.134 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Auth/login - 200 null application/json; charset=utf-8 484.5557ms
2025-05-02 19:10:19.653 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Profile - application/json 122
2025-05-02 19:10:19.713 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:10:19.714 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:10:19.784 +03:00 [INF] Executing endpoint 'e_learning.Controllers.ProfileController.CreateProfile (e_learning)'
2025-05-02 19:10:19.795 +03:00 [INF] Route matched with {action = "CreateProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateProfile(CreateProfileDto) on controller e_learning.Controllers.ProfileController (e_learning).
2025-05-02 19:10:19.831 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Profiles] AS [p]
        WHERE [p].[UserId] = @__userId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-05-02 19:10:19.882 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='Helwan' (Size = 4000), @p1='Back-end developer and mentor 💻' (Size = 4000), @p2='2025-05-02T16:10:19.8380920Z', @p3='01145064366' (Size = 4000), @p4='' (Size = 4000), @p5='2025-05-02T16:10:19.8381263Z', @p6='3'], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Profiles] ([Address], [Bio], [CreatedAt], [Phone], [ProfilePicture], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-05-02 19:10:19.899 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-05-02 19:10:19.901 +03:00 [INF] Executed action e_learning.Controllers.ProfileController.CreateProfile (e_learning) in 101.6311ms
2025-05-02 19:10:19.904 +03:00 [INF] Executed endpoint 'e_learning.Controllers.ProfileController.CreateProfile (e_learning)'
2025-05-02 19:10:19.905 +03:00 [INF] HTTP POST /api/Profile responded 200 in 192.8577 ms
2025-05-02 19:10:19.914 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Profile - 200 null text/plain; charset=utf-8 260.7583ms
2025-05-02 19:10:54.201 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/api/Profile/me - null null
2025-05-02 19:10:54.208 +03:00 [INF] Executing endpoint 'e_learning.Controllers.ProfileController.GetMyProfile (e_learning)'
2025-05-02 19:10:54.244 +03:00 [INF] Route matched with {action = "GetMyProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyProfile() on controller e_learning.Controllers.ProfileController (e_learning).
2025-05-02 19:10:54.396 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__userId_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [p].[Id], [p].[Address], [p].[Bio], [p].[CreatedAt], [p].[Phone], [p].[ProfilePicture], [p].[UpdatedAt], [p].[UserId], [u].[Id], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
FROM [Profiles] AS [p]
INNER JOIN [Users] AS [u] ON [p].[UserId] = [u].[Id]
WHERE [p].[UserId] = @__userId_0
2025-05-02 19:10:54.425 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.ProfileResponseDto'.
2025-05-02 19:10:54.434 +03:00 [INF] Executed action e_learning.Controllers.ProfileController.GetMyProfile (e_learning) in 184.5455ms
2025-05-02 19:10:54.436 +03:00 [INF] Executed endpoint 'e_learning.Controllers.ProfileController.GetMyProfile (e_learning)'
2025-05-02 19:10:54.440 +03:00 [INF] HTTP GET /api/Profile/me responded 200 in 234.4335 ms
2025-05-02 19:10:54.444 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/api/Profile/me - 200 null application/json; charset=utf-8 242.7784ms
2025-05-02 19:13:10.917 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Course - application/json 106
2025-05-02 19:13:10.921 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:13:10.960 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:13:10.963 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 19:13:10.972 +03:00 [INF] Route matched with {action = "AddCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCourse(e_learning.DTOs.Courses.CourseCreateDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:13:11.014 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-02 19:13:11.288 +03:00 [INF] Executed action e_learning.Controllers.CourseController.AddCourse (e_learning) in 307.6484ms
2025-05-02 19:13:11.290 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 19:13:11.291 +03:00 [INF] HTTP POST /api/Course responded 400 in 370.5275 ms
2025-05-02 19:13:11.293 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Course - 400 null application/problem+json; charset=utf-8 376.5167ms
2025-05-02 19:13:16.368 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Course - application/json 87
2025-05-02 19:13:16.371 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:13:16.373 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:13:16.376 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 19:13:16.378 +03:00 [INF] Route matched with {action = "AddCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCourse(e_learning.DTOs.Courses.CourseCreateDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:13:16.383 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-02 19:13:16.385 +03:00 [INF] Executed action e_learning.Controllers.CourseController.AddCourse (e_learning) in 4.1293ms
2025-05-02 19:13:16.388 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 19:13:16.390 +03:00 [INF] HTTP POST /api/Course responded 400 in 18.3477 ms
2025-05-02 19:13:16.436 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Course - 400 null application/problem+json; charset=utf-8 67.6525ms
2025-05-02 19:14:07.871 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Course - application/json 87
2025-05-02 19:14:07.875 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:14:07.876 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:14:07.878 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 19:14:07.879 +03:00 [INF] Route matched with {action = "AddCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCourse(e_learning.DTOs.Courses.CourseCreateDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:14:07.884 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-05-02 19:14:07.890 +03:00 [INF] Executed action e_learning.Controllers.CourseController.AddCourse (e_learning) in 8.8764ms
2025-05-02 19:14:07.894 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 19:14:07.897 +03:00 [INF] HTTP POST /api/Course responded 400 in 22.4916 ms
2025-05-02 19:14:07.900 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Course - 400 null application/problem+json; charset=utf-8 28.3839ms
2025-05-02 19:14:24.748 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Category - application/json 22
2025-05-02 19:14:24.752 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:14:24.754 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:14:24.756 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CategoryController.AddCategory (e_learning)'
2025-05-02 19:14:24.779 +03:00 [INF] Route matched with {action = "AddCategory", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCategory(e_learning.DTOs.CategoryDto) on controller e_learning.Controllers.CategoryController (e_learning).
2025-05-02 19:14:24.829 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='python' (Nullable = false) (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Categories] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2025-05-02 19:14:24.846 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.Models.Category'.
2025-05-02 19:14:24.895 +03:00 [INF] Executed action e_learning.Controllers.CategoryController.AddCategory (e_learning) in 111.8083ms
2025-05-02 19:14:24.897 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CategoryController.AddCategory (e_learning)'
2025-05-02 19:14:24.899 +03:00 [INF] HTTP POST /api/Category responded 200 in 147.3458 ms
2025-05-02 19:14:24.905 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Category - 200 null application/json; charset=utf-8 157.4347ms
2025-05-02 19:14:30.949 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/api/Category - null null
2025-05-02 19:14:30.954 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CategoryController.Get (e_learning)'
2025-05-02 19:14:30.959 +03:00 [INF] Route matched with {action = "Get", controller = "Category"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[e_learning.Models.Category]]] Get() on controller e_learning.Controllers.CategoryController (e_learning).
2025-05-02 19:14:30.992 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Categories] AS [c]
2025-05-02 19:14:31.005 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[e_learning.Models.Category, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:14:31.009 +03:00 [INF] Executed action e_learning.Controllers.CategoryController.Get (e_learning) in 45.9439ms
2025-05-02 19:14:31.014 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CategoryController.Get (e_learning)'
2025-05-02 19:14:31.017 +03:00 [INF] HTTP GET /api/Category responded 200 in 62.8937 ms
2025-05-02 19:14:31.023 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/api/Category - 200 null application/json; charset=utf-8 73.0079ms
2025-05-02 19:15:08.112 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Course - application/json 123
2025-05-02 19:15:08.116 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:15:08.118 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:15:08.119 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 19:15:08.121 +03:00 [INF] Route matched with {action = "AddCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCourse(e_learning.DTOs.Courses.CourseCreateDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:15:08.256 +03:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='1', @p1='string' (Size = 4000), @p2=NULL (Size = 4000), @p3='0', @p4='True' (Nullable = true), @p5='string' (Nullable = false) (Size = 4000), @p6='0' (Precision = 18) (Scale = 2), @p7=NULL (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Courses] ([CategoryId], [Description], [ImageUrl], [InstructorId], [IsActive], [Name], [Price], [Title])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-02 19:15:08.320 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'e_learning.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Courses_Users_InstructorId". The conflict occurred in database "E_LearningDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Courses_Users_InstructorId". The conflict occurred in database "E_LearningDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-02 19:15:08.351 +03:00 [INF] Executed action e_learning.Controllers.CourseController.AddCourse (e_learning) in 227.4563ms
2025-05-02 19:15:08.353 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 19:15:08.359 +03:00 [ERR] HTTP POST /api/Course responded 500 in 242.5918 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Courses_Users_InstructorId". The conflict occurred in database "E_LearningDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.CourseController.AddCourse(CourseCreateDto dto) in C:\Users\ta\OneDrive\Desktop\gpfirst\Controllers\CourseController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-02 19:15:08.437 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Courses_Users_InstructorId". The conflict occurred in database "E_LearningDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.CourseController.AddCourse(CourseCreateDto dto) in C:\Users\ta\OneDrive\Desktop\gpfirst\Controllers\CourseController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-02 19:15:08.467 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Course - 500 null text/plain; charset=utf-8 354.9126ms
2025-05-02 19:15:18.327 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Course - application/json 125
2025-05-02 19:15:18.332 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:15:18.333 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:15:18.335 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 19:15:18.336 +03:00 [INF] Route matched with {action = "AddCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCourse(e_learning.DTOs.Courses.CourseCreateDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:15:18.356 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='1', @p1='string' (Size = 4000), @p2=NULL (Size = 4000), @p3='0', @p4='True' (Nullable = true), @p5='string' (Nullable = false) (Size = 4000), @p6='125' (Precision = 18) (Scale = 2), @p7=NULL (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Courses] ([CategoryId], [Description], [ImageUrl], [InstructorId], [IsActive], [Name], [Price], [Title])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-02 19:15:18.367 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'e_learning.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Courses_Users_InstructorId". The conflict occurred in database "E_LearningDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Courses_Users_InstructorId". The conflict occurred in database "E_LearningDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-02 19:15:18.400 +03:00 [INF] Executed action e_learning.Controllers.CourseController.AddCourse (e_learning) in 62.0336ms
2025-05-02 19:15:18.407 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 19:15:18.410 +03:00 [ERR] HTTP POST /api/Course responded 500 in 77.9636 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Courses_Users_InstructorId". The conflict occurred in database "E_LearningDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.CourseController.AddCourse(CourseCreateDto dto) in C:\Users\ta\OneDrive\Desktop\gpfirst\Controllers\CourseController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-02 19:15:18.433 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Courses_Users_InstructorId". The conflict occurred in database "E_LearningDB", table "dbo.Users", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.CourseController.AddCourse(CourseCreateDto dto) in C:\Users\ta\OneDrive\Desktop\gpfirst\Controllers\CourseController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-02 19:15:18.461 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Course - 500 null text/plain; charset=utf-8 133.4416ms
2025-05-02 19:16:13.766 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7056/api/Course - application/json 126
2025-05-02 19:16:13.819 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:16:13.858 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:16:13.876 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 19:16:13.878 +03:00 [INF] Route matched with {action = "AddCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddCourse(e_learning.DTOs.Courses.CourseCreateDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:16:13.920 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='1', @p1='string' (Size = 4000), @p2=NULL (Size = 4000), @p3='1', @p4='True' (Nullable = true), @p5='string' (Nullable = false) (Size = 4000), @p6='125' (Precision = 18) (Scale = 2), @p7=NULL (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Courses] ([CategoryId], [Description], [ImageUrl], [InstructorId], [IsActive], [Name], [Price], [Title])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-05-02 19:16:13.948 +03:00 [INF] Executing OkObjectResult, writing value of type 'Course'.
2025-05-02 19:16:13.959 +03:00 [INF] Executed action e_learning.Controllers.CourseController.AddCourse (e_learning) in 77.6585ms
2025-05-02 19:16:13.961 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.AddCourse (e_learning)'
2025-05-02 19:16:13.962 +03:00 [INF] HTTP POST /api/Course responded 200 in 143.6246 ms
2025-05-02 19:16:13.972 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7056/api/Course - 200 null application/json; charset=utf-8 205.8432ms
2025-05-02 19:16:27.460 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/api/Course - null null
2025-05-02 19:16:27.463 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.GetCourses (e_learning)'
2025-05-02 19:16:27.470 +03:00 [INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:16:27.538 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title]
FROM [Courses] AS [c]
2025-05-02 19:16:27.571 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Course, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:16:27.574 +03:00 [INF] Executed action e_learning.Controllers.CourseController.GetCourses (e_learning) in 93.2187ms
2025-05-02 19:16:27.584 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.GetCourses (e_learning)'
2025-05-02 19:16:27.585 +03:00 [INF] HTTP GET /api/Course responded 200 in 122.4955 ms
2025-05-02 19:16:27.590 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/api/Course - 200 null application/json; charset=utf-8 130.4189ms
2025-05-02 19:17:04.746 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7056/api/Course/3 - application/json 349
2025-05-02 19:17:04.749 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:17:04.751 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:17:04.753 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:17:04.800 +03:00 [INF] Route matched with {action = "UpdateCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCourse(Int32, e_learning.DTOs.CourseResponseDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:17:04.863 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__p_0
2025-05-02 19:17:04.911 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p4='3', @p0='0', @p1='0', @p2='0' (Precision = 18) (Scale = 2), @p3='string' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Courses] SET [CategoryId] = @p0, [InstructorId] = @p1, [Price] = @p2, [Title] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-05-02 19:17:04.920 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'e_learning.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-02 19:17:04.956 +03:00 [INF] Executed action e_learning.Controllers.CourseController.UpdateCourse (e_learning) in 153.2398ms
2025-05-02 19:17:04.959 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:17:04.961 +03:00 [ERR] HTTP PUT /api/Course/3 responded 500 in 211.6949 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.CourseController.UpdateCourse(Int32 id, CourseResponseDto courseRequest) in C:\Users\ta\OneDrive\Desktop\gpfirst\Controllers\CourseController.cs:line 118
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-02 19:17:04.998 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.CourseController.UpdateCourse(Int32 id, CourseResponseDto courseRequest) in C:\Users\ta\OneDrive\Desktop\gpfirst\Controllers\CourseController.cs:line 118
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-02 19:17:05.020 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7056/api/Course/3 - 500 null text/plain; charset=utf-8 273.1009ms
2025-05-02 19:17:17.412 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7056/api/Course/1 - application/json 349
2025-05-02 19:17:17.416 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:17:17.417 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:17:17.419 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:17:17.422 +03:00 [INF] Route matched with {action = "UpdateCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCourse(Int32, e_learning.DTOs.CourseResponseDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:17:17.496 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__p_0
2025-05-02 19:17:17.502 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-05-02 19:17:17.508 +03:00 [INF] Executed action e_learning.Controllers.CourseController.UpdateCourse (e_learning) in 83.1754ms
2025-05-02 19:17:17.510 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:17:17.511 +03:00 [INF] HTTP PUT /api/Course/1 responded 404 in 95.0236 ms
2025-05-02 19:17:17.525 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7056/api/Course/1 - 404 null text/plain; charset=utf-8 112.7616ms
2025-05-02 19:17:24.422 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7056/api/Course/3 - application/json 349
2025-05-02 19:17:24.428 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:17:24.430 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:17:24.432 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:17:24.434 +03:00 [INF] Route matched with {action = "UpdateCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCourse(Int32, e_learning.DTOs.CourseResponseDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:17:24.497 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__p_0
2025-05-02 19:17:24.515 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p4='3', @p0='0', @p1='0', @p2='0' (Precision = 18) (Scale = 2), @p3='string' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Courses] SET [CategoryId] = @p0, [InstructorId] = @p1, [Price] = @p2, [Title] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-05-02 19:17:24.524 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'e_learning.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-02 19:17:24.551 +03:00 [INF] Executed action e_learning.Controllers.CourseController.UpdateCourse (e_learning) in 66.1837ms
2025-05-02 19:17:24.553 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:17:24.555 +03:00 [ERR] HTTP PUT /api/Course/3 responded 500 in 126.5165 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.CourseController.UpdateCourse(Int32 id, CourseResponseDto courseRequest) in C:\Users\ta\OneDrive\Desktop\gpfirst\Controllers\CourseController.cs:line 118
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-02 19:17:24.581 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.CourseController.UpdateCourse(Int32 id, CourseResponseDto courseRequest) in C:\Users\ta\OneDrive\Desktop\gpfirst\Controllers\CourseController.cs:line 118
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-02 19:17:24.613 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7056/api/Course/3 - 500 null text/plain; charset=utf-8 190.3463ms
2025-05-02 19:18:27.861 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7056/api/Course/1 - application/json 349
2025-05-02 19:18:27.866 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:18:27.867 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:18:27.869 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:18:27.870 +03:00 [INF] Route matched with {action = "UpdateCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCourse(Int32, e_learning.DTOs.CourseResponseDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:18:27.936 +03:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__p_0
2025-05-02 19:18:27.942 +03:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2025-05-02 19:18:27.945 +03:00 [INF] Executed action e_learning.Controllers.CourseController.UpdateCourse (e_learning) in 72.4313ms
2025-05-02 19:18:27.950 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:18:27.952 +03:00 [INF] HTTP PUT /api/Course/1 responded 404 in 85.9188 ms
2025-05-02 19:18:27.956 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7056/api/Course/1 - 404 null text/plain; charset=utf-8 94.8565ms
2025-05-02 19:18:56.106 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/api/Course - null null
2025-05-02 19:18:56.110 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.GetCourses (e_learning)'
2025-05-02 19:18:56.113 +03:00 [INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:18:56.141 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title]
FROM [Courses] AS [c]
2025-05-02 19:18:56.151 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Course, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:18:56.153 +03:00 [INF] Executed action e_learning.Controllers.CourseController.GetCourses (e_learning) in 37.4351ms
2025-05-02 19:18:56.155 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.GetCourses (e_learning)'
2025-05-02 19:18:56.156 +03:00 [INF] HTTP GET /api/Course responded 200 in 46.9366 ms
2025-05-02 19:18:56.160 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/api/Course - 200 null application/json; charset=utf-8 54.5687ms
2025-05-02 19:20:20.819 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7056/api/Course/3 - application/json 349
2025-05-02 19:20:20.822 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:20:20.823 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:20:20.825 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:20:20.826 +03:00 [INF] Route matched with {action = "UpdateCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCourse(Int32, e_learning.DTOs.CourseResponseDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:20:20.841 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__p_0
2025-05-02 19:20:20.884 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[@p4='3', @p0='0', @p1='0', @p2='0' (Precision = 18) (Scale = 2), @p3='string' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Courses] SET [CategoryId] = @p0, [InstructorId] = @p1, [Price] = @p2, [Title] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-05-02 19:20:20.897 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'e_learning.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-02 19:20:20.936 +03:00 [INF] Executed action e_learning.Controllers.CourseController.UpdateCourse (e_learning) in 108.4254ms
2025-05-02 19:20:20.941 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:20:20.943 +03:00 [ERR] HTTP PUT /api/Course/3 responded 500 in 121.1719 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.CourseController.UpdateCourse(Int32 id, CourseResponseDto courseRequest) in C:\Users\ta\OneDrive\Desktop\gpfirst\Controllers\CourseController.cs:line 118
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-02 19:20:20.970 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.CourseController.UpdateCourse(Int32 id, CourseResponseDto courseRequest) in C:\Users\ta\OneDrive\Desktop\gpfirst\Controllers\CourseController.cs:line 118
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-02 19:20:21.013 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7056/api/Course/3 - 500 null text/plain; charset=utf-8 193.3606ms
2025-05-02 19:21:03.138 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/api/Course - null null
2025-05-02 19:21:03.143 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.GetCourses (e_learning)'
2025-05-02 19:21:03.145 +03:00 [INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:21:03.197 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title]
FROM [Courses] AS [c]
2025-05-02 19:21:03.206 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Course, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:21:03.211 +03:00 [INF] Executed action e_learning.Controllers.CourseController.GetCourses (e_learning) in 64.2014ms
2025-05-02 19:21:03.214 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.GetCourses (e_learning)'
2025-05-02 19:21:03.218 +03:00 [INF] HTTP GET /api/Course responded 200 in 76.6645 ms
2025-05-02 19:21:03.224 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/api/Course - 200 null application/json; charset=utf-8 85.7689ms
2025-05-02 19:22:18.638 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7056/api/Course/3 - application/json 37
2025-05-02 19:22:18.641 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:22:18.643 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:22:18.646 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:22:18.648 +03:00 [INF] Route matched with {action = "UpdateCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCourse(Int32, e_learning.DTOs.CourseResponseDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:22:18.668 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__p_0
2025-05-02 19:22:18.703 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[@p6='3', @p0='0', @p1=NULL (Size = 4000), @p2='0', @p3=NULL (DbType = Boolean), @p4='Python' (Nullable = false) (Size = 4000), @p5='250' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Courses] SET [CategoryId] = @p0, [Description] = @p1, [InstructorId] = @p2, [IsActive] = @p3, [Name] = @p4, [Price] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-05-02 19:22:18.714 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'e_learning.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-05-02 19:22:18.750 +03:00 [INF] Executed action e_learning.Controllers.CourseController.UpdateCourse (e_learning) in 99.4069ms
2025-05-02 19:22:18.752 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:22:18.754 +03:00 [ERR] HTTP PUT /api/Course/3 responded 500 in 112.3822 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.CourseController.UpdateCourse(Int32 id, CourseResponseDto courseRequest) in C:\Users\ta\OneDrive\Desktop\gpfirst\Controllers\CourseController.cs:line 118
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-05-02 19:22:18.779 +03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The UPDATE statement conflicted with the FOREIGN KEY constraint "FK_Courses_Categories_CategoryId". The conflict occurred in database "E_LearningDB", table "dbo.Categories", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:cb291f0d-317e-46d1-a289-9e3f1b91c96e
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at e_learning.Controllers.CourseController.UpdateCourse(Int32 id, CourseResponseDto courseRequest) in C:\Users\ta\OneDrive\Desktop\gpfirst\Controllers\CourseController.cs:line 118
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-05-02 19:22:18.807 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7056/api/Course/3 - 500 null text/plain; charset=utf-8 168.6598ms
2025-05-02 19:22:32.389 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/api/Course - null null
2025-05-02 19:22:32.395 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.GetCourses (e_learning)'
2025-05-02 19:22:32.397 +03:00 [INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:22:32.448 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title]
FROM [Courses] AS [c]
2025-05-02 19:22:32.454 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Course, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:22:32.457 +03:00 [INF] Executed action e_learning.Controllers.CourseController.GetCourses (e_learning) in 58.1545ms
2025-05-02 19:22:32.462 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.GetCourses (e_learning)'
2025-05-02 19:22:32.465 +03:00 [INF] HTTP GET /api/Course responded 200 in 70.9458 ms
2025-05-02 19:22:32.472 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/api/Course - 200 null application/json; charset=utf-8 82.8759ms
2025-05-02 19:22:44.648 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/api/Course - null null
2025-05-02 19:22:44.653 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.GetCourses (e_learning)'
2025-05-02 19:22:44.655 +03:00 [INF] Route matched with {action = "GetCourses", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourses() on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:22:44.701 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title]
FROM [Courses] AS [c]
2025-05-02 19:22:44.714 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Course, e_learning, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-05-02 19:22:44.720 +03:00 [INF] Executed action e_learning.Controllers.CourseController.GetCourses (e_learning) in 62.0745ms
2025-05-02 19:22:44.722 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.GetCourses (e_learning)'
2025-05-02 19:22:44.726 +03:00 [INF] HTTP GET /api/Course responded 200 in 73.6532 ms
2025-05-02 19:22:44.731 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/api/Course - 200 null application/json; charset=utf-8 82.6723ms
2025-05-02 19:23:44.880 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7056/api/Course/3 - application/json 87
2025-05-02 19:23:44.884 +03:00 [INF] CORS policy execution failed.
2025-05-02 19:23:44.885 +03:00 [INF] Request origin https://localhost:7056 does not have permission to access the resource.
2025-05-02 19:23:44.888 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:23:44.890 +03:00 [INF] Route matched with {action = "UpdateCourse", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateCourse(Int32, e_learning.DTOs.CourseResponseDto) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:23:44.908 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title]
FROM [Courses] AS [c]
WHERE [c].[Id] = @__p_0
2025-05-02 19:23:44.942 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p4='3', @p0=NULL (Size = 4000), @p1=NULL (DbType = Boolean), @p2='python' (Nullable = false) (Size = 4000), @p3='250' (Precision = 18) (Scale = 2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Courses] SET [Description] = @p0, [IsActive] = @p1, [Name] = @p2, [Price] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2025-05-02 19:23:44.948 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-05-02 19:23:44.949 +03:00 [INF] Executed action e_learning.Controllers.CourseController.UpdateCourse (e_learning) in 56.0105ms
2025-05-02 19:23:44.951 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.UpdateCourse (e_learning)'
2025-05-02 19:23:44.952 +03:00 [INF] HTTP PUT /api/Course/3 responded 200 in 68.3219 ms
2025-05-02 19:23:44.955 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7056/api/Course/3 - 200 null text/plain; charset=utf-8 74.8593ms
2025-05-02 19:23:59.775 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7056/api/Course/3 - null null
2025-05-02 19:23:59.778 +03:00 [INF] Executing endpoint 'e_learning.Controllers.CourseController.GetCourseById (e_learning)'
2025-05-02 19:23:59.784 +03:00 [INF] Route matched with {action = "GetCourseById", controller = "Course"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCourseById(Int32) on controller e_learning.Controllers.CourseController (e_learning).
2025-05-02 19:23:59.931 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='3'], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CategoryId], [t].[Description], [t].[ImageUrl], [t].[InstructorId], [t].[IsActive], [t].[Name], [t].[Price], [t].[Title], [t].[Id0], [t].[Name0], [t].[Id1], [t].[CreatedAt], [t].[Email], [t].[FullName], [t].[IsEmailConfirmed], [t].[PasswordHash], [t].[Role], [t].[UpdatedAt], [r].[Id], [r].[Comment], [r].[CourseId], [r].[Rating], [r].[UserId]
FROM (
    SELECT TOP(1) [c].[Id], [c].[CategoryId], [c].[Description], [c].[ImageUrl], [c].[InstructorId], [c].[IsActive], [c].[Name], [c].[Price], [c].[Title], [c0].[Id] AS [Id0], [c0].[Name] AS [Name0], [u].[Id] AS [Id1], [u].[CreatedAt], [u].[Email], [u].[FullName], [u].[IsEmailConfirmed], [u].[PasswordHash], [u].[Role], [u].[UpdatedAt]
    FROM [Courses] AS [c]
    INNER JOIN [Categories] AS [c0] ON [c].[CategoryId] = [c0].[Id]
    INNER JOIN [Users] AS [u] ON [c].[InstructorId] = [u].[Id]
    WHERE [c].[Id] = @__id_0
) AS [t]
LEFT JOIN [Reviews] AS [r] ON [t].[Id] = [r].[CourseId]
ORDER BY [t].[Id], [t].[Id0], [t].[Id1]
2025-05-02 19:23:59.951 +03:00 [INF] Executing OkObjectResult, writing value of type 'e_learning.DTOs.CourseResponseDto'.
2025-05-02 19:23:59.958 +03:00 [INF] Executed action e_learning.Controllers.CourseController.GetCourseById (e_learning) in 170.3669ms
2025-05-02 19:23:59.961 +03:00 [INF] Executed endpoint 'e_learning.Controllers.CourseController.GetCourseById (e_learning)'
2025-05-02 19:23:59.963 +03:00 [INF] HTTP GET /api/Course/3 responded 200 in 184.8891 ms
2025-05-02 19:23:59.966 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7056/api/Course/3 - 200 null application/json; charset=utf-8 190.8488ms
2025-05-02 19:24:17.966 +03:00 [INF] Application is shutting down...
